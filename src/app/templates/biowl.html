{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}VizSciFlow{% endblock %}

{% block head %}
{{ super() }}
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jstree/3.3.8/themes/default/style.min.css" /> -->
<link rel="stylesheet" href="/static/library/jstree/style.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/basic/jquery.qtip.min.css" /> 

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round|Open+Sans">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.6.2/css/bootstrap-slider.min.css"> 
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gridstack.js/0.4.0/gridstack.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.15/css/bootstrap-multiselect.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css" integrity="sha512-/zs32ZEJh+/EO2N1b0PEdoA10JkdC3zJ8L5FTiQu82LR9S/rOQNfQN7U59U9BC12swNeRAz3HSzIL2vpp4fv3w==" crossorigin="anonymous" />
<link rel="stylesheet" href="/static/library/scidatamanager/styles/style.css">

<script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-base.min.js"></script>
<script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-heatmap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.15/js/bootstrap-multiselect.min.js"></script>
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/jstree/3.3.8/jstree.min.js"></script> -->
<script src="/static/library/jstree/jstree.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/ace-builds/src-min-noconflict/ace.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/ace-builds/src-min-noconflict/ext-language_tools.js') }}"></script>
<script src="https://cdn.rawgit.com/mgalante/jquery.redirect/master/jquery.redirect.js"></script>
<script src="/static/library/gojs/go.js"></script>
<script src="/static/js/icons.js"></script>
<script src="/static/library/d3/d3.min.js"></script>
<script src="/static/library/d3/d3-selection-multi.min.js"></script>
<!-- <script src="http://d3js.org/d3.v4.min.js" type="text/javascript"></script>
<script src="http://d3js.org/d3-selection-multi.v1.js"></script> -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="/static/library/scidatamanager/dataset-ui.js"></script>
<script src="/static/library/scidatamanager/utils.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.1.0/redux.min.js" integrity="sha512-F21iSaHGX/3NFz5SuwoH6pGhTPxtoJoWWULqQVPQPtLm7nbK5r8vRSSSYy3Aj+H39cVrVm4+3ikGoVD1AjE0sQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/static/library/scidatamanager/store.js"></script> 

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" integrity="sha512-s+xg36jbIujB2S2VKfpGmlC3T5V2TF3lY48DX7u2r9XzGzgPsa6wTpOQA7J9iffvdeBN0q9tKzRxVxw1JviZPg==" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/knockout.contextmenu@1.0.0/src/knockout.contextmenu.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.6.2/bootstrap-slider.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gridstack.js/0.4.0/gridstack.all.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/basic/jquery.qtip.min.js"></script>

<script type="text/javascript" src="{{ url_for('static', filename='js/util.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/ko.observableDictionary.js') }}"></script>
<!-- <script src="/static/library/Chart.HeatMap.S.min.js"></script> -->
<!-- <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-base.min.js" type="text/javascript"></script> -->


<!-- app js files -->
<script src="/static/app.js/dataSourceViewModel.js"></script>
<script src="/static/app.js/browserViewModel.js"></script>
<script src="/static/app.js/datasetsViewModel.js"></script>
<script src="/static/app.js/datasetAddViewModel.js"></script>
<script src="/static/app.js/datasetviewViewModel.js"></script>
<script src="/static/app.js/metadataViewModel.js"></script>
<script src="/static/app.js/document.ready.js"></script>
<script src="/static/app.js/filterViewModel.js"></script>
<script src="/static/app.js/ajaxCalls.js"></script>
<script src="/static/app.js/tasksViewModel.js"></script>
<script src="/static/app.js/samplesViewModel.js"></script>
<script src="/static/app.js/gridStackViewModel.js"></script>
<script src="/static/app.js/uiComponentsControl.js"></script>
<script src="/static/app.js/runnablesViewModel.js"></script>
<script src="/static/app.js/addLibraryViewModel.js"></script>
<script src="/static/app.js/aceEditor.js"></script>
<script src="/static/app.js/detailGraphViewModel.js"></script>
<script src="/static/app.js/sampleViewModel.js"></script>
<script src="/static/app.js/controlFlowViewModel.js"></script>
<script src="/static/app.js/provGraphViewModel.js"></script>
<script src="/static/app.js/monitorGraphViewModel.js"></script>
<script src="/static/app.js/provPluginsViewModel.js"></script>
<script src="/static/app.js/appProvPluginViewModel.js"></script>
<script src="/static/app.js/datasetPluginViewModel.js"></script>

<link rel="stylesheet" href="{{ url_for('static', filename='biowl.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='biowl-span-rules.css')}}">
{% endblock %}
{% block page_content %}

<div class="container-fluid">
	<div class="row row-flex">
		<div class="col-md-3 box-zero"> 
			<div id="filter-area" class="panel panel-primary">
				<div class="panel-heading">
					<button id="btnfilterClose" type="button" class="close" title="Close Filter" data-bind="click: closeFilter" aria-hidden="true">&times;</button>
					<h4>Search & Filter</h4>
				</div>
				<div class="table-responsive" style="overflow-x: hidden;">
					<table class="table table-bordered " style="display: block;">
						<thead>
							<tr>
								<th class="filter-dialog-modal-text col-sm-1" style="padding: 0 0 8px 0 ; text-align: center">
									<i class="fa fa-check-square-o" style="font-size: 2rem"></i>
								</th>
								<th class="filter-dialog-modal-text col-sm-2" >Name</th>
								<th class="filter-dialog-modal-text col-sm-5 col-lg-6" >Filter</th>
								<th class="filter-dialog-modal-text col-sm-1" >Sort</th>
								<th class="filter-dialog-modal-text col-sm-3  col-lg-2" style=" text-align: center;">
									<i class="fa fa-sort" style="font-size: 2rem"></i>
								</th>
							</tr>
						</thead>
						<tbody data-bind="foreach: filters">
							<tr>
								<td>
									<input type="checkbox" data-bind="checked: selected, event: {change: $parent.filterOnSelection.bind($data)}" />
								</td>
								<td class="filter-dialog-modal-text" data-bind="text: name"></td>
								<td class="filter-dialog-modal-text filter-value-td"
									data-bind="descendantsComplete: $parent.formControlCustomization.bind($data)">
									<input type="text" class="form-control"
										data-bind="value: value, valueUpdate: 'keyup', event: {change : $parent.promptFilter.bind($data), keyup : $parent.promptFilter.bind($data)}">
								</td>
								<td class="filter-dialog-modal-text">
									<button class="btn btn-xs btn-primary" style="background: transparent; border-color: transparent"
										data-bind="value: sort, click: $parent.toggleSort;"><i data-bind="class : $parent.setSortClass(sort)"
											class="fa fa-times fa-xs" style="background: transparent; color: black"></i></button>
								</td>
								<td class="filter-dialog-modal-text">
									<div style="display: inline-block">
										<button class="btn btn-xs fa fa-sort-up" style="border-radius: 2px; display: inline-block;"
											data-bind="disable: $index() === 0, click: $parent.moveUp" title="Move Up"></button>
										<button class="btn btn-xs fa fa-sort-down" style="border-radius: 2px; display: inline-block;"
											data-bind="disable: $index() === $parent.filters().length - 1, click: $parent.moveDown"
											title="Move Down"></button>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="modal-footer" style="padding: 10px 4px 10px 4px;">
					<div class="col-sm-2" style="padding-left: 0;">
						<label class="control-label" data-bind="visible: okText() == 'Save'" for="filtername">Name</label>
					</div>
					<div class="col-sm-5" style="padding: 0;">
						<input class="form-control" data-bind="value: name, visible: okText() == 'Save'" type="text" id="filtername">
					</div>
					<div class="col-sm-5" style="padding: 0;">
						<button class="btn btn-primary" data-bind="visible: okText() == 'Save', click: filter, text: okText"
							aria-hidden="true"></button>
						<button class="btn btn-danger" style="margin-left: 0;" data-bind="visible: okText() == 'Save', click: closeFilter" aria-hidden="true">Cancel</button>
					</div>
					<!-- <form class="form-inline">
						<div class="form-group">
							<label class="control-label" data-bind="visible: okText() == 'Save'" for="filtername">Name</label>
							<input class="form-control" data-bind="value: name, visible: okText() == 'Save'" type="text" id="filtername">
						</div>
						<button class="btn btn-primary" data-bind="visible: okText() == 'Save', click: filter, text: okText"
							aria-hidden="true"></button>
						<button class="btn btn-danger" data-bind="visible: okText() == 'Save', click: closeFilter" aria-hidden="true">Cancel</button>
					</form> -->
				</div>
			</div>
		</div>
		<div class="col-md-3 box-one" style="padding: 0">
			<div id="datasourceStack" class="panel panel-primary" style="position: relative;">
				<div class="panel-heading" >
						<!-- checked: access, -->
					<button class="close closeComponent" title="Close" type="button">×</button>
					<div class="row" style="padding-left: 15px">
							<label class="radio-inline"> <input type="radio" name="dataSourcesTab" value="0"  checked="checked" autocomplete="off">Data Sources</label>
							<!-- <label class="radio-inline"> <input type="radio" name="dataSourcesTab" value="1"  autocomplete="off">Datasets</label> -->
						<!-- <div>
							<h4 class="col-sm-6">Data Sources</h4>
						</div> -->
					</div>
				</div>
				<div id="dataSourcesPanel">
					<div class="panel datasources-panel-header">
						<div class="btn-group btn-group-sm">
							<!--<button class="btn btn-primary pull-right" data-toggle="tooltip"
																			data-placement="top" title="Recursive Reload"
																			data-bind="click: load.bind($data, true)">
																			<i class="glyphicon glyphicon-unchecked"></i>
																		</button> -->
							<button id="btnAbout" class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top"
								title="About" data-bind="click: about">
								<i class="glyphicon glyphicon-info-sign toolbar-icon"></i>
							</button>
							<button id="btnReload" class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top"
								title="Reload" data-bind="click: load.bind($data, true)">
								<i class="glyphicon glyphicon-refresh toolbar-icon"></i>
							</button>
							<button id="btnDownload" class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top"
								title="Download" data-bind="click: download">
								<i class="glyphicon glyphicon-download toolbar-icon"></i>
							</button>
							<button id="btnBeginFileUpload" class="btn btn-primary pull-right" data-toggle="modal" data-placement="top"
								title="Upload" data-bind="click: beginFileUpload">
								<i class="glyphicon glyphicon-upload toolbar-icon"></i>
							</button>
							<button id="btnBeginUpdateMetadata" class="btn btn-primary pull-right" data-toggle="modal"
								data-placement="top" title="Update Metadata" data-bind="click: beginUpdateMetadata">
								<i class="glyphicon glyphicon-edit toolbar-icon"></i>
							</button>
							<button id="btnDeleteFolderFile" class="btn btn-primary pull-right" data-toggle="tooltip"
								data-placement="top" title="Delete Folder/File" data-bind="click: remove">
								<i class="glyphicon glyphicon-minus toolbar-icon"></i>
							</button>
							<button id="btnAddFolder" class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top"
								title="Add Folder" data-bind="click: addFolder, clickBubble: false">
								<i class="glyphicon glyphicon-plus toolbar-icon"></i>
							</button>
						</div>
						<div id="dataSourcesSearchPanel" class="form-inline">
							<input class="form-control" style="width: 67%" type="text" placeholder="Search…"
								data-bind="value: searchDataSource, valueUpdate: 'keyup'" />
							<!-- <button id="btnOpenFilterDialog" class="btn btn-primary" data-toggle="tooltip"
								data-placement="top" title="Filter" data-bind="click: openFilterDialog.bind($data, false)">
								<i class="glyphicon glyphicon-filter"></i>
							</button> -->
						</div>
					</div>
					<div id="dataSourcesTreeView" class="panel-body draggable-datasources"
						style="height: 416px; overflow-y: scroll; padding: 0">
						<div id="tree" data-bind="jstree: { data: dataSources }"></div>
					</div>
				</div>
				<div id="dataSetsPanel" hidden >
						<div class="panel datasources-panel-header">
							<div class="btn-group btn-group-sm">
								<button id="btnAbout" class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top"
									title="About" data-bind="click: about">
									<i class="glyphicon glyphicon-info-sign toolbar-icon"></i>
								</button>
								<button id="btnReload" class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top"
									title="Reload" data-bind="click: load.bind($data, true)">
									<i class="glyphicon glyphicon-refresh toolbar-icon"></i>
								</button>
								<!-- <button id="btnDownload" class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top"
									title="Download" data-bind="click: download">
									<i class="glyphicon glyphicon-download toolbar-icon"></i>
								</button>
								<button id="btnBeginFileUpload" class="btn btn-primary pull-right" data-toggle="modal" data-placement="top"
									title="Upload" data-bind="click: beginFileUpload">
									<i class="glyphicon glyphicon-upload toolbar-icon"></i>
								</button> -->
								<button id="btnEditSchema" class="btn btn-primary pull-right" data-toggle="modal"
									data-placement="top" title="Edit Schema" data-bind="click: editSchema">
									<i class="glyphicon glyphicon-edit toolbar-icon"></i>
								</button> 
								<button id="btnDeleteSchema" class="btn btn-primary pull-right" data-toggle="tooltip"
									data-placement="top" title="Delete Schema" data-bind="click: deleteSchema">
									<i class="glyphicon glyphicon-minus toolbar-icon"></i>
								</button>
								<button id="btnAddNewDataset" class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top"
									title="Add New" data-bind="click : addNew">
									<i class="glyphicon glyphicon-plus toolbar-icon"></i>
								</button>
							</div>
							<div id="dataSetsSearchPanel" class="form-inline">
								<input id="txtDatasetsSearch" class="form-control" style="width: 67%" type="text" placeholder="Search…"
									 data-bind="value: datasetFilter, valueUpdate: 'keyup' " /> 	
							</div>
						</div>
						<div id="dataSetsListView" class="panel-body draggable-datasources"
							style="height: 416px; overflow-y: scroll; padding: 0" >
							<div data-bind="foreach: filteredDatasets">
                                <div class="dataset-listview" data-bind="click: $parent.click.bind($data),  datasetHover : $data, css: {'dataset-listview-selected' : $data.id == $parent.currentSelection()}, trigAddUpdateDataset: $data">
									<label class="dataset-item-label">
										<h4 data-bind="text: name, searchTextMatch : $data"></h4>
										<a data-bind="attr: {href: 'http://' + url} ,text: url, searchTextMatch : $data" style="margin-left: 10px" target="_blank"></a><br>
										<span data-bind="text: description, searchTextMatch : $data" style="margin-left: 10px"></span>
									</label>
								</div>
							</div>
							<!-- <ul data-bind="foreach: datasets">
                                <li>
									<div class="dataset-listview">
										<h2 data-bind="text: Title"></h2>
										<label data-bind="text: Url"></label>
										<label data-bind="text: UpdatedDate"></label>
									</div>
								</li>
							</ul> -->
						</div>
					</div>
			</div>
			
			<!-- scidatamanager plugin panel -->
			<div id="datasetPluginPanel" class="panel panel-primary">
				<div class="panel-heading">
					<button class="close closeComponent" title="Close" type="button">×</button>
					<div class="row">
						<div style="display : block">
							<h4 class="col-sm-8">SciDataManager Plugin</h4>

							<button class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top" title="Update Plugin Title"
								data-bind="click: reload">
								<i class="glyphicon glyphicon-refresh toolbar-icon"></i>
							</button>
						</div>
					</div>
				</div> 
				<div class="panel-body" style="max-height: 50vh; overflow-y: auto;">
					<div id="datasetPlugin"></div>
				</div>
			</div>

			<div id="searchHistoryPanel" class="panel panel-primary">
				<div class="panel-heading">
					<button class="close closeComponent" title="Close" type="button">×</button>
					<div class="row">
						<div style="display : block">
							<h4 class="col-sm-6">Saved Filters</h4>
							<button class="btn btn-primary pull-left" data-toggle="tooltip" data-placement="top" title="About"
								data-bind="click: about">
								<i class="glyphicon glyphicon-info-sign toolbar-icon"></i>
							</button>
						</div>
					</div>
				</div> 
				<div class="panel-body" style="max-height: 200px; overflow-y: auto;" data-bind="foreach: savedFilters">
					<div class="col savedfilter-item" data-bind="event: {click: $parent.toggleExpand, dblclick: $parent.filterByHistory}, contextMenu: { 'Apply': $parent.filterByHistory, 'Filter Dialog...': $parent.openSavedFilterDialog, 'To Editor': $parent.copyToEditor, 'Delete' : $parent.deleteSavedFilter}, css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }">
						<span data-bind="text: name"></span>
					</div>
				</div>
			</div>
			<div id="runnableWorkflowsPanel" class="panel panel-primary">
				<div class="panel-heading">
					<button class="close closeComponent" title="Close" type="button">×</button>
					<div class="row">
						<div>
							<h4 class="col-sm-6">Job Histories</h4>
						</div>
					</div>
					<div class="btn-group">
						<div class="btn-group-sm">
							<button class="btn btn-primary pull-right" data-toggle="tooltip"
								data-placement="top" title="About"
								data-bind="click: about">
								<i class="glyphicon glyphicon-info-sign toolbar-icon"></i>
							</button>
							<button class="btn btn-primary pull-right" data-toggle="tooltip"
								data-placement="top" title="Compare"
								data-bind="enable: shouldTaskCompareActive, visible: handleModeViewModel.shouldProvElemShow(), click: compareTask">
								<i class="fa fa-exchange toolbar-icon"></i>
							</button>
							<button class="btn btn-primary pull-right" data-toggle="tooltip"
								data-placement="top" title="Restart Execution"
								data-bind="click: restart">
								<i class="glyphicon glyphicon-repeat toolbar-icon"></i>
							</button>
							<button class="btn btn-primary pull-right" data-toggle="tooltip"
								data-placement="top" title="Stop Execution"
								data-bind="click: stop">
								<i class="glyphicon glyphicon-stop toolbar-icon"></i>
							</button>
							<button class="btn btn-primary pull-right" data-toggle="tooltip"
								data-placement="top" title="Reload" data-bind="click: load">
								<i class="glyphicon glyphicon-refresh toolbar-icon"></i>
							</button>
							<button class="btn btn-primary pull-right" data-toggle="tooltip"
								data-placement="top" title="Deselect All"
								data-bind="click: deselectAll">
								<i class="glyphicon glyphicon-unchecked toolbar-icon"></i>
							</button>
							<button class="btn btn-primary pull-right" data-toggle="tooltip"
								data-placement="top" title="Select All"
								data-bind="click: selectAll">
								<i class="glyphicon glyphicon-check toolbar-icon"></i>
							</button>
						</div>
					</div>
				</div>
				<div class="panel-body"
					style="max-height: 200px; width: 100%; overflow-y: scroll;"
					data-bind="foreach: items">
					<div class="div-history-item row menu_button" id="runnablesHistory"
						data-bind=" css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }, style: { color: recent() ? 'red' : 'black' }">
						<div class="col-md-1" style="padding-left: 0; margin-right: 5px;">
							<input type="checkbox" class="form-check-input" style="margin-left: 10px"
								data-bind="checked: selected, event: {click: $parent.toggleTaskCompareBtn}"/> 
						</div>
						<div class="col-md-10" style="vertical-align: middle; padding-left: 0;" data-bind="event: {click: $parent.toggleExpand, dblclick: $parent.copyToEditor}">
							<img class="history-item-img" width="16px" height="16px" data-bind="attr:{src: statusImg}" />
							<label data-bind="text: name" class="form-check-label label-checkbox" style="margin-top: 2px"></label>
						</div>
						
						<!-- job history floating toolbar -->
						<span class="runnableToolbar service-toolbar" data-bind="visible: handleModeViewModel.shouldProvElemShow()">
							<span class="glyphicon glyphicon-export" id="insert2Editor" data-bind="event: {click: $parent.runnableToolbar}" title="Provenance"></span>
						</span>

						<span class="runnableToolbar service-toolbar" data-bind="visible: handleModeViewModel.shouldProvElemShow()" style="right: 2em;">
							<span class="fa fa-desktop" id="monitorGraph" data-bind="event: {click: $parent.runnableToolbar}" title="Monitor Execution"></span>
						</span>
						
						<div class="col" style="float: right;padding-right: 5px" data-bind="event: {click: $parent.toggleExpand, dblclick: $parent.copyToEditor}">
							<span data-bind="text: modified" style="text-align: right"></span>
						</div>
						<div style="clear: both" ></div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 box-two" id="main">
				<div class="panel panel-primary" id="codeeditor" style="margin: 2px">
				
					<div class="panel-heading text-center">
					<h4 style="margin-bottom:10px">VizSciFlow Workflow & Provenance Editor</h4>

					<div class="btn-group" style="left: 1.5vw; position: absolute;">
						<button class="btn btn-primary" id="wfMode" style="display: grid" onclick="handleModeViewModel.setMode('wfMode')">
							<i class="fa fa-sitemap"></i>
							Workflow
						</button>
						<button class="btn btn-primary" id="provMode" style="display: grid" onclick="handleModeViewModel.setMode('provMode')">
							<i class="fa fa-columns"></i>
							Provenance
						</button>
					</div>
					
					<div class="btn-group">
						<div class="btn-group-sm">
							<button class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="New Workflow" id="newwf" onclick="samplesViewModel.newwf()">
								<i class="glyphicon glyphicon-plus toolbar-icon"></i>
							</button>
							<button class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Save Workflow" id="savewf" data-bind="click: updateWorkflow.bind(true)">
								<i class="glyphicon glyphicon-floppy-disk toolbar-icon"></i>
							</button>
							<button class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Save As Workflow..." id="saveaswf" onclick="samplesViewModel.beginAdd()">
								<i class="glyphicon glyphicon-floppy-save toolbar-icon"></i>
							</button>
							
							<div class="btn-group" role="group">
							    <button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							      <span class="glyphicon glyphicon-text-size toolbar-icon" aria-hidden="true"></span>
					                <span class="caret"></span>
					                <span class="sr-only">Text size</span>
							    </button>
							    <ul class="dropdown-menu" role="menu" aria-labelledby="btnGroupDrop1" id="panel-fontsize">
							      <li><a class="dropdown-item" href="#">10</a></li>
							      <li><a class="dropdown-item" href="#">11</a></li>
							      <li><a class="dropdown-item" href="#">12</a></li>
							      <li><a class="dropdown-item" href="#">14</a></li>
							      <li><a class="dropdown-item" href="#">16</a></li>
							      <li><a class="dropdown-item" href="#">18</a></li>
							      <li><a class="dropdown-item" href="#">20</a></li>
							      <li><a class="dropdown-item" href="#">24</a></li>							      
							    </ul>
							</div>
							<button class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="About VizSciFlow Syntax" id="panel-about">
								<i class="glyphicon glyphicon-info-sign toolbar-icon"></i>
							</button>
							
  							<button class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Toggle fullscreen" id="panel-fullscreen">
								<i class="glyphicon glyphicon-resize-full toolbar-icon"></i>
							</button>

							<div class="btn-group" role="group">
								<button id="btnEditorTabs" type="button" class="btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Show Tab">
									<i class="glyphicon glyphicon-menu-hamburger"></i>
								</button>
								<ul class="dropdown-menu" role="menu" aria-labelledby="btnEditorTabs" id="editortabs-dropdown" >
									<li><a class="btn btn-secondary"  href="#liProvenanceTab">Provenance</a></li>
									<li><a class="btn btn-secondary"  href="#liVisualTab">Visual Tab</a></li>
									<li> <a class="btn btn-secondary" href="#liMetadataTab">Metadata</a></li>
									<li> <a class="btn btn-secondary" href="#liFilterHistoryTab">Filter History</a></li>
									<li> <a class="btn btn-secondary" href="#liBrowserTab">Browser</a></li>
									<!-- <li> <a class="btn btn-secondary"  href="#liOutputVizTab">Visual Output</a></li> -->
									<!--<li> <a class="btn btn-secondary" href="#liDataset">Dataset</a></li> -->
									<li> <a class="btn btn-secondary" href="#liOutput">Output</a></li>
								</ul>
							</div>
							<!-- <div class="dropdown">
								<button class="btn btn-secondary dropdown-toggle" type="button" id="btnEditorTabs" data-toggle="dropdown"
									aria-haspopup="true" aria-expanded="false">
									<i class="fa fa-ellipsis-h"></i>
								</button>
								<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
									<a class="dropdown-item" href="#">Graph</a>
									<a class="dropdown-item" href="#">Metadata</a>
									<a class="dropdown-item" href="#">Filter History</a>
									<a class="dropdown-item" href="#">Browser</a>
									<a class="dropdown-item" href="#">Dataset</a>
								</div>
							</div> -->
						</div>
						<h5 id='script-name'></h5>
					</div>
					
				</div>
					<div class="panel-body">
						<div id="exTabBiowl" class="panel panel-primary" style="min-height: 400px; margin-bottom: 5px">
							<ul class="nav nav-tabs marginBottom">
								<li id="liScriptTab" class="active "><a href="#scripttab" class="backgroundRed" data-toggle="tab">Script</a></li>
								<li id="liProvenanceTab"><a href="#provenancetab" data-toggle="tab">Provenance Viewer<button class="close closeTab" title="Close" type="button">×</button></a></li>
								<li id="liVisualTab"><a href="#visualtab" data-toggle="tab">Visual <button class="close closeTab" title="Close" type="button">×</button></a></li>								
								<li id="liMetadataTab"><a href="#metatab" data-toggle="tab">Metadata <button class="close closeTab" title="Close" type="button">×</button></a></li>
								<!-- <button class="close closeTab" type="button">×</button> -->
								<li id="liFilterHistoryTab"><a href="#filterhistorytab" data-toggle="tab">Filter History <button class="close closeTab" title="Close" type="button">×</button></a></li>
								<li id="liBrowserTab"><a href="#browsertab" data-toggle="tab">Browser <button class="close closeTab" title="Close" type="button">×</button></a></li>
								<!-- <li id="liOutputVizTab"><a href="#outputVizTab" data-toggle="tab">Visual Output<button class="close closeTab" title="Close" type="button">×</button></a></li> -->
								<li id="liDataset"><a href="#datasettab" data-toggle="tab">Dataset <button class="close closeTab" title="Close" type="button">×</button></a></li>
								<li id="liOutput"><a href="#outputtab" data-toggle="tab">Output <button class="close closeTab" title="Close" type="button">×</button></a></li>
							</ul>
						<div class="tab-content">
							<div class="tab-pane fade in active scriptstyle" id="scripttab">
								<div id="editor" class="editorstyle"></div>
							</div>

							<div class="tab-pane fade ui-droppable" id="provenancetab" style="position: relative;">	
								<div class="prov-panel-heading">
									<select name="provTabView" class="provTabCombo"></select>
								</div>

								<div id="provViewerBody" style="width: 100%; height: 100%; z-index: 0;">
									<div id="provenance" style="width: 100%; height: 100%; z-index: 0;"></div>
									<div id="provDiagramOverview"></div>

									<div id="tblCompareDiv"></div>

									<div id="textCompareMainDiv"></div>

									<div id="pluginViewDiv">
										<iframe id="pluginHtmlView" class="center" src="" frameborder="0" data-bind="attr: {src: pluginHtmlSrc}" style="display: block" width="100%" height="100%"></iframe>
									</div>
									<div id="proveLineCharts">
										<canvas id="canvasLineChart" class="chart"></canvas>
									</div>
									<div id="proveBarCharts">
										<canvas id="canvasBarChart" class="chart"></canvas>
									</div>
									<div id="provePieCharts">
										<canvas id="canvasPieChart" class="chart"></canvas>
									</div>
									<div id="proveHeatMap" style="height: 90% !important; width:100% !important;">
										<!-- <canvas id="canvasHeatMap" class="chart"></canvas> -->
									</div>
								</div>
							</div>

							<!-- visualtab -->
							<div class="tab-pane fade ui-droppable" id="visualtab" style="position: relative;">								
								<div style="width: 100%; height: 100%; z-index: 0;" id="visual"></div>
								<div id="visualDiagramOverview"></div>
							</div>


							<div class="tab-pane fade in scriptstyle" style="overflow-y: scroll" id="metatab">
							</div>
							<div class="tab-pane fade in scriptstyle" style="overflow-y: scroll" id="filterhistorytab">
								
							</div>
							<div class="tab-pane fade in scriptstyle" id="browsertab">
								<div class="browser-panel-heading">
									<label class="radio-inline"> <input type="radio" name="browserTabView" value="0" checked="checked"
											autocomplete="off">&nbsp; Icons</label>
									<label class="radio-inline"> <input type="radio" name="browserTabView" value="1"
											autocomplete="off">&nbsp; Preview</label>
								</div>
							</div>
							<!-- <div class="tab-pane fade in scriptstyle" id="outputVizTab" style="overflow-y: scroll;">

							</div> -->
							<div class="tab-pane fade in scriptstyle" style="overflow-y: scroll" id="datasettab">

							</div>
							
							<div class="tab-pane fade in scriptstyle" style="overflow-y: scroll" id="outputtab">
								<iframe id="outputItemDetails" class="center" src="" frameborder="0" data-bind="attr:{src: itemSrc}" style="display: block" width="100%" height="100%"></iframe>
							</div>
						</div>
						</div>
						<div class="row">
							<div class="span-sm-2 span-xxxl-2 span-4xl-1">
								<span class="text-secondary ">Arguments:</span>
							</div>
							<div class="span-sm-18 span-xxxl-18 span-4xl-19">
								<textarea rows="1" class="args-area" id="args"></textarea>
							</div>
						</div>
					</div>
				</div>
				<div class="panel-body" style="padding: 0; margin: 1vh 0 1vh 0;">
					<button id="runBioWL" class="btn pull-left btn-primary btn-lg"
						style="margin-right: 5px;" data-bind="enable: shouldRunActivate, click: runBioWL">Run</button>
					
					<button id="runGraph" class="btn pull-left btn-primary btn-lg"
						style="margin-right: 5px; padding: 10px 4px;" data-bind="visible: handleModeViewModel.shouldGraphBtnShow(), enable: shouldRunActivate, event: {click: runGraph}">Graph</button>
					
					<div style="margin-top: 8px">
						<label class="label-checkbox checkbox-font" style="vertical-align: middle"><input type="checkbox"
							id="immediate"> <span class="label-immediate">Immediate</span>
						</label> 
						<span
							class="badge badge-primary">Time: <span id="duration"
							class="badge badge-light" style="vertical-align: baseline;">0s</span>
						</span> <span
							class="glyphicon glyphicon-repeat normal-right-spinner pull-right"
							id="refresh"></span>
					</div>
				</div>
				<div id="outputPanel" class="panel panel-primary">
					<div class="panel-heading">
						<button class="close closeComponent" title="Close" type="button">×</button>
						<div class="row">
							<div class="col-sm-8">
								<h4 class="pull-left">Results</h4>
								<button class="btn btn-info pull-right" data-toggle="tooltip" data-placement="top" title="Clear"	data-bind="click: clearResults">
									<span class="glyphicon glyphicon-remove-sign toolbar-icon">Clear</span>
								</button>
							</div>
						</div>
					 </div>
					
					<div id="exTab2" class="extab2">
						<ul class="nav nav-tabs">
							<li class="active"><a href="#1" data-toggle="tab">Log</a></li>
							<li><a href="#2" data-toggle="tab">Error</a></li>
							<li><a href="#3" data-toggle="tab">Output</a></li>
						</ul>
						<span class="badge badge-pill badge-primary" style="float: left" id="reportid"></span>
						<span class="badge badge-pill badge-primary" id="execstatus"></span>
						<!-- 				<span class="badge badge-pill badge-danger" style="float: right" id="execerr"></span> -->
						<div class="tab-content extab2-tab-content">
							<div class="tab-pane fade in active" id="1">
								<textarea rows="10" class="log-tab" id="output"></textarea>
								<!-- <br> -->
							</div>
							<div class="tab-pane fade" id="2">
								<textarea rows="10" class="log-tab" id="error"></textarea>
								<!-- <br> -->
							</div>
							<div class="tab-pane fade" id="3">
								<div class="browser-panel-heading">
									<select name="logTabView" class="logTabCombo">
										<option value="0" checked="checked" autocomplete="off">&nbsp; List</option>
										<option value="1" autocomplete="off">&nbsp; Preview</option>
									</select>
								</div>
								<div id="logListView" data-bind="visible: isListLog">
									<span id="executable-status"></span>
									<div>
										<table class="table table-striped" id="log" style="table-layout: fixed;">
											<thead>
												<tr>
													<th class="report-header" scope="col" width="15%">Task</th>
													<th class="report-header" scope="col" width="65%" style="text-align:center;">Data</th>
													<th class="report-header" scope="col" width="15%" style="text-align:center;">Status</th>
												</tr>
											</thead>
											<tbody>
											</tbody>
										</table>
									</div>
								</div>
								<div id="logSliderView" class="container-fluid" aria-hidden="true" data-bind="visible: !isListLog()">
									<div id="logTabCarousel" class="owl-carousel col-sm-12" style=" bottom: 0%; position: relative;" data-bind="foreach: {data: logData , afterRender: sliderController.bind($data)}">
										<div style="display: block;" data-bind="event: {click : $parent.openInDetailsView.bind($data)}, attr: {title: name}">
											<figure style="display: inline-block">
												<img  width="auto" style="width: auto; height: 50px;" data-bind="attr: {src: imgUrl, alt: name}">
												<figcaption class="figcaption-clipped" data-bind="text: name"></figcaption>
											</figure>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
		</div>

		<div class="col-md-3 box-three" style="padding: 2px;">
			<!-- newly added prov panel -->
			<div id="provplugins" class="panel panel-primary" style="padding: 2px">
				<div class="panel-heading">
					<button class="close closeComponent" title="Close" type="button">×</button>
					<div class="row">
						<div class="col-sm-8">
							<h4 class="pull-left">Provenance Plugins</h4>
							<button class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top" title="About"	data-bind="click: about">
								<i class="glyphicon glyphicon-info-sign toolbar-icon"></i>
							</button>
						</div>
					</div>
					<div class="row panel-controlgroup">
						<!-- <label class="radio-inline"> <input type="radio" name="access" value="0" data-bind="checked: access, click:click" checked="checked" autocomplete="off">Public</label>
						<label class="radio-inline"> <input type="radio" name="access" value="1" data-bind="checked: access, click:click" autocomplete="off">Shared</label>
						<label class="radio-inline"> <input type="radio" name="access" value="2" data-bind="checked: access, click:click" autocomplete="off">Private</label>
						<label class="radio-inline"> <input type="radio" name="access" value="3" data-bind="checked: access, click:click" autocomplete="off">All</label> -->
						
						<div class="input-group" style="margin-top: 10px">
							<span class="input-group-btn">
								<button style="margin-right: 10px;" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
									title="Reload" data-bind="click: reload">
									<i class="glyphicon glyphicon-refresh toolbar-icon"></i>
								</button>
								<button style="margin-right: 10px;" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
									title="Add" data-bind="click: beginAddProvPlugin">
									<i class="glyphicon glyphicon-plus toolbar-icon"></i>
								</button>
							</span> 
							<input class="form-control" type="text" placeholder="Search…"
								data-bind="value: provpluginFilter, valueUpdate: 'keyup'" />
						</div>
					</div>
				</div>
				<div class="panel-body draggable-prov"
					style="max-height: 200px; width: 100%; overflow-y: scroll; padding: 3px 3px 0 0">
				<!--	<div class="row" style="width: 100%; margin: 0">
						<div class="p-3 mb-2 bg-primary text-white"
							style="float: left; width: 80%; text-align: left; padding-left: 12px"><strong>Name</strong></div>
						<div class="p-3 mb-2 bg-primary text-white"
							style="float: right; padding-left: 5px; width: 20%; text-align: center"><strong>Package</strong></div>
					</div> -->

					<div data-bind="foreach: filteredProvPlugins">
						<div class="row draggable-provenance"
							data-bind="css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }"
							style="width: 100%; margin: 0; display: block">
							<div class="col-xm-6 menu_button"
								style="float: left; margin: 7px 0px 7px 0px; padding-left: 10px; width: 80%;"
							>
								<i data-bind="visible: access() == '0' " class="fa fa-globe"></i>
								<i data-bind="visible: access() == '1' " class="fa fa-users"></i>
								<i data-bind="visible: access() == '2' " class="fa fa-lock"></i>
								&nbsp;
								<span style="font-weight: bold;" data-bind="text: name, event: {dblclick: $parent.copyToEditorDblClick, click: $parent.toggleExpand}, clickBubble: false, draggable : $data"></span>
								
								<!-- Prov toolbar for owner only -->
								<span id='provpluginToolbar' class='service-toolbar' data-bind="visible: isowner()">
									<span id="shareDropdown" data-bind="event: {click: $parent.shareWithUsers} "
										data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										Share
									</span>
									<span class="glyphicon glyphicon-trash" id="delete" data-bind="event: {click: $parent.serviceToolbar} "></span>
								</span>
								
							</div>
							<br>
							<div class="col" style="float: right">
								<span data-bind="text: package" style="text-align: right"></span>
							</div>
							<div style="clear:both"></div>
						</div>
					</div>
				</div>
			</div>
		
			<div id="functions" class="panel panel-primary">
				<div class="panel-heading">
					<button class="close closeComponent" title="Close" type="button">×</button>
					<div class="row">
						<div class="col-sm-6">
							<h4 class="pull-left">Services</h4>
							<button class="btn btn-primary pull-right" data-toggle="tooltip"
								data-placement="top" title="About"
								data-bind="click: about">
								<i class="glyphicon glyphicon-info-sign toolbar-icon"></i>
							</button>
						</div>
					</div>
					<div class="row panel-controlgroup">
						<label class="radio-inline"> <input type="radio" name="serviceAccess" value="0" data-bind="checked: access, click:click"
								checked="checked" autocomplete="off">Public</label>
						<label class="radio-inline"> <input type="radio" name="serviceAccess" value="1" data-bind="checked: access, click:click"
								autocomplete="off">Shared</label>
						<label class="radio-inline"> <input type="radio" name="serviceAccess" value="2" data-bind="checked: access, click:click"
								autocomplete="off">Private</label>
						<label class="radio-inline"> <input type="radio" name="serviceAccess" value="3" data-bind="checked: access, click:click"
								autocomplete="off">All</label>

						<div class="input-group" style="margin-top: 10px;">
							<span class="input-group-btn">
								<button style="margin-right: 10px;" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
									title="Reload" data-bind="click: reload">
									<i class="glyphicon glyphicon-refresh toolbar-icon"></i>
								</button>
								<button style="margin-right: 10px;" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
									title="Add" data-bind="click: beginAddLibrary">
									<i class="glyphicon glyphicon-plus toolbar-icon"></i>
								</button>
							</span>
							<input class="form-control" type="text" placeholder="Search…"
								data-bind="value: taskFilter, valueUpdate: 'keyup'" />
						</div>
					</div>
				</div>
				<div class="panel-body draggable-functions"
					style="max-height: 500px; overflow-y: scroll; padding: 3px">
					<div class="row" style="width: 100%; margin: 0">
						<div class="p-3 mb-2 bg-primary text-white"
							style="float: left; text-align: left; padding-left:5px; width: 60%"><strong>Name</strong></div>
						<div class="p-3 mb-2 bg-primary text-white"
							style="float: right; padding-left: 4px; text-align: right; padding-right: 5px; width: 40%"><strong>Group(Package)</strong></div>
					</div>
					<div data-bind="foreach: filteredTasks">
						<div class="row"
							data-bind="css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }"
							style="width: 100%; margin: 0; display: block;">
							<div class="col-md-auto draggable-func menu_button float: left;" style="word-wrap: break-word; padding-left: 5px; font-weight: bold;">
								<i data-bind="visible: access() == '0' " class="fa fa-globe"></i>
								<i data-bind="visible: access() == '1' " class="fa fa-users"></i>
								<i data-bind="visible: access() == '2' " class="fa fa-lock"></i>
								&nbsp;
								<span style="font-weight: bold;" data-bind="text: name, event: {dblclick: $parent.copyToEditorDblClick, click: $parent.toggleExpand}, clickBubble: false, draggable : $data"></span>

								<!-- service floating toolbar for owner only -->
								<span id="serviceToolbar" class="service-toolbar" data-bind="visible: isOwner()">
									<span id="copyProv" title="Provenance" data-bind="visible: handleModeViewModel.shouldProvElemShow(), event: {click: $parent.serviceToolbar} "
										data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										Prov.
									</span>
									<span id="shareDropdown" data-bind="event: {click: $parent.shareWithUsers} "
										data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										Share
									</span>
									<span class="glyphicon glyphicon-trash" id="delete" data-bind="event: {click: $parent.serviceToolbar} "></span>
								</span>
							
							</div>
							<div class="col" style="float: right;padding-right: 5px">
								<span data-bind="text: group" style="text-align: right"></span>(<span data-bind="text: package" style="text-align: left"></span>)
							</div>
							<div style="clear:both"></div>
						</div>
					</div>
				</div>
			</div>
			
			<!-- 	            <div data-bind="stopBinding: true"> -->
			<div id="samples" class="panel panel-primary" style="padding: 2px">
				<div class="panel-heading">
					<button class="close closeComponent" title="Close" type="button">×</button>
					<div class="row">
						<div class="col-sm-6">
							<h4 class="pull-left">Workflows</h4>
							<button class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top" title="About"	data-bind="click: about">
								<i class="glyphicon glyphicon-info-sign toolbar-icon"></i>
							</button>
						</div>
					</div>
					<div class="row panel-controlgroup">
						<label class="radio-inline"> <input type="radio" name="access" value="0" data-bind="checked: access, click:click" checked="checked" autocomplete="off">Public</label>
						<label class="radio-inline"> <input type="radio" name="access" value="1" data-bind="checked: access, click:click" autocomplete="off">Shared</label>
						<label class="radio-inline"> <input type="radio" name="access" value="2" data-bind="checked: access, click:click" autocomplete="off">Private</label>
						<label class="radio-inline"> <input type="radio" name="access" value="3" data-bind="checked: access, click:click" autocomplete="off">All</label>
						
						<div class="input-group" style="margin-top: 10px">
							<span class="input-group-btn">
								<button style="margin-right: 10px;" class="btn btn-primary"
									data-toggle="tooltip" data-placement="top" title="Reload"
									data-bind="click: load">
									<i class="glyphicon glyphicon-refresh toolbar-icon"></i>
								</button>
								<button style="margin-right: 10px;" class="btn btn-primary"
									data-toggle="tooltip" data-placement="top" title="Save"
									data-bind="click: beginAdd">
									<i class="glyphicon glyphicon-floppy-save toolbar-icon"></i>
								</button>
								<button style="margin-right: 10px;" class="btn btn-primary"
									data-toggle="tooltip" data-placement="top" title="Compare"
									data-bind="visible: handleModeViewModel.shouldProvElemShow(), click: compareWf">
									<i class="fa fa-exchange toolbar-icon"></i>
								</button>
							</span> 
							<input class="form-control" type="text" placeholder="Search…"
								data-bind="value: workflowFilter, valueUpdate: 'keyup'" />
						</div>
					</div>
				</div>
				<div class="panel-body draggable-samples"
					style="max-height: 200px; width: 100%; overflow-y: scroll; padding: 3px 3px 0 0">
					<div class="row" style="width: 100%; margin: 0">
						<div class="p-3 mb-2 bg-primary text-white"
							style="float: left; width: 80%; text-align: left; padding-left: 12px"><strong>Name</strong></div>
						<div class="p-3 mb-2 bg-primary text-white"
							style="float: right; padding-left: 5px; width: 20%; text-align: center"><strong>Owner</strong></div>
					</div>

					<div data-bind="foreach: filteredWorkflows">
						<div class="row draggable-workflow"
							data-bind="event: {dblclick: $parent.saveCurrentLoadintoEditor, click : $parent.toggleExpand}, css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }"
							style="width: 100%; margin: 0; display: block">
							<div class="col-xm-6 menu_button"
								style="float: left; margin: 7px 0px 7px 0px; padding-left: 10px; width: 80%;"
								data-bind=" draggable : $data">
								<i data-bind="visible: access() == '0' " class="fa fa-globe"></i>
								<i data-bind="visible: access() == '1' " class="fa fa-users"></i>
								<i data-bind="visible: access() == '2' " class="fa fa-lock"></i>
								&nbsp;
								<span style="font-weight: bold;" data-bind="text: name"></span>
								
								<!-- workflow toolbar for owner only -->
								<span id='workflowDropdown' class='service-toolbar workflow-toolbar' data-bind="visible: isOwner() == true">
									<span id="copyProv" title="Provenance" data-bind="visible: handleModeViewModel.shouldProvElemShow(), event: {click: $parent.workflowToolbar} "
										data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										Prov.
									</span>

									<span id="showGraph" title="Graph" data-bind="visible: handleModeViewModel.shouldProvElemShow(), event: {click: $parent.workflowToolbar}"
										data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										Graph
									</span>
									
									<span class="glyphicon glyphicon-trash" id="delete" data-bind="event: {click: $parent.workflowToolbar} "></span>
								</span>
								
							</div>
							
							<div class="col-xm-3 menu_button" style="float: right; margin: 7px 0 7px 0; padding-left: 20px; width: 20%"
								data-bind="text: user"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div id="add" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="addDialogLabel" aria-hidden="true" style="overflow-y: auto;">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-wide" role="document">
	  <div class="modal-content">
		<div class="modal-header">
		  <h3 id="addDialogLabel" class="modal-title">Add Service</h3>
		  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		  </button>
		</div>
		<div class="modal-body">
			<form role="form">
				<div class="span-sm-20">
					<div class="span-sm-10">
						<div class="row service-form-group">
							<label class="span-sm-4" for="module">Module</label>
							<div class="span-sm-16">
								<input type="file" class="form-control-file" id="module">
							</div>
						</div>
					</div>
				</div>
			</form>
			<br> <br>
			<div id="exTabService" class="controls">
				<ul class="nav nav-tabs">
					<li class="active"><a href="#service1" data-toggle="tab">Script</a></li>
					<li><a href="#service2" data-toggle="tab">JSON Mapper</a></li>
				</ul>
				<div class="tab-content ">
					<div class="tab-pane fade in active" id="service1">
						<textarea rows="10" style="width: inherit" id="servicescript"></textarea>
						<br>
					</div>
					<div class="tab-pane fade" id="service2">
						<div class="span-sm-20">
							<div class="span-sm-7">
								<h3>Function:</h3>
								<form role="form" data-bind="foreach: service.items">
									<div class="row service-form-group" data-bind="visible: ($index() < 4 || $parent.isFuncExpanded)">
										<label class="span-sm-6" data-bind="text: key"></label>
										<div class="span-sm-14">
											<input type="text" class="form-control" id="package" data-bind="value: value, valueUpdate: 'keyup', event: {keyup: $parent.liveJsonView },attr: {placeholder: value}">
										</div>
									</div>
								</form>
								<button class="btn btn-sm" style="float: right;" data-bind="click: toggleFuncArea, text: textToggleFuncArea, css: { 'btn-primary' : !isFuncExpanded() , 'btn-danger' : isFuncExpanded}"></button>
							</div>
							<div class="span-sm-6">
								<div>
									<h3>Parameters:</h3>
									<button class="btn btn-primary" data-bind="click: addParam, visible: serviceParams().length == 0">Add</button>
									<form role="form" data-bind="foreach: serviceParams" style="overflow-x: hidden; overflow-y: auto; max-height: 25vh;">
										<div class="span-sm-20" style="padding-right: 0;padding-bottom: 5px;">
											<a style="float: right;" class="btn btn-sm btn-primary" title="Add"
												data-bind="click: $parent.addParam, visible: $index() === ($parent.serviceParams().length-1)"><i
													class="fa fa-plus"></i></a>
											<a style="float: right;" class="btn btn-sm btn-danger" title="Remove"
												data-bind="click: $parent.removeParam.bind($data)"><i class="fa fa-minus"></i></a>
										</div>
										<div data-bind="foreach: $data.items">
											<div class="row service-form-group">
												<label class="span-sm-6" data-bind="text: key"></label>
												<div class="span-sm-14">
													<input type="text" class="form-control" id="package"
														data-bind="value: value, valueUpdate: 'keyup', event: { keyup : $parents[1].liveJsonView}">
												</div>
											</div>
										</div>
										<hr data-bind="visible: $index() != ($parent.serviceParams().length-1)">
									</form>
								</div>
								<div>
									<h3>Returns:</h3>
									<button class="btn btn-primary" data-bind="click: addServiceReturns, visible: serviceReturns().length == 0">Add</button>
									<form role="form" data-bind="foreach: serviceReturns" style="overflow-x: hidden; overflow-y: auto; max-height: 25vh;">
										<div class="span-sm-20" style="padding-right: 0;padding-bottom: 5px;">
											<a style="float: right;" class="btn btn-sm btn-primary" title="Add"
												data-bind="click: $parent.addServiceReturns, visible: $index() === ($parent.serviceReturns().length-1)"><i
													class="fa fa-plus"></i></a>
											<a style="float: right;" class="btn btn-sm btn-danger" title="Remove"
												data-bind="click: $parent.removeServiceReturns.bind($data)"><i class="fa fa-minus"></i></a>
										</div>
										<div data-bind="foreach: $data.items">
											<div class="row service-form-group">
												<label class="span-sm-6" data-bind="text: key"></label>
												<div class="span-sm-14">
													<input type="text" class="form-control" id="package"
														data-bind="value: value, valueUpdate: 'keyup', event: { keyup : $parents[1].liveJsonView}">
												</div>
											</div>
										</div>
										<hr data-bind="visible: $index() != ($parent.serviceReturns().length-1)">
									</form>
								</div>
							</div>
							<div class="span-sm-7">
								<h3>JSON Preview:</h3>
								<div style="width: inherit;" id="mapper"></div>
							</div>
						</div>
						<br>
					</div>
				</div>
			</div>
			<br><br>
			<div class="row service-form-group">
				<div class="span-sm-10">
					<div class="row service-form-group">
						<label class="span-sm-5" for="pippkgs">pip Install</label>
						<div class="span-sm-10">
							<input type="text" class="form-control" id="pippkgs" data-bind="value: pippkgs">
						</div>
					</div>
					<div class="row service-form-group">
						<label for="" class="span-sm-5">Share with</label>
						<div class="span-sm-10">
							<select id="userSelection" multiple="multiple" class="form-control" data-bind="options: userList, 
								 optionsText: 'name', 
								 optionsValue: 'id', 
								 selectedOptions: selectedSharingUsers">
							</select>
						</div>
						<label class="span-sm-3" for="access">Public</label>
						<div class="span-sm-2">
							<input type="checkbox" id="access" data-bind="checked: access">
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<span class="span-sm-10" style = "color: red; margin-left: 4px; text-align: left;" id="add-library-info"></span>
			<button data-bind="click: addLibrary" class="btn btn-primary">Add</button>
			<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancel</button>
		</div>
	  </div>
	</div>
  </div>



  <div id="addProv" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="addDialogLabel" aria-hidden="true" style="overflow-y: auto;">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	  <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		  </button>
		  <h3 id="addDialogLabel" class="modal-title">Add Provenance</h3>
		</div>
		<div class="modal-body">
			<div id="exTabProvenance" class="controls">
				<ul class="nav nav-tabs">
					<li class="active"><a href="#provenance1" data-toggle="tab">Query</a></li>
					<li><a href="#provenance2" data-toggle="tab">View</a></li>
				</ul>
				<div class="tab-content ">
					<div class="tab-pane fade in active" id="provenance1">
						<textarea rows="10" style="width: inherit" id="provenancescript"></textarea>
						<br>
					</div>
					<div class="tab-pane fade" id="provenance2">
						<textarea rows="10" style="width: inherit" id="provenancehtml"></textarea>
						<br>
					</div>
				</div>
			</div>
			<br>
			<div class="row provenance-form-group">
				<div class="span-sm-10">
					<div class="row provenance-form-group">
						<label class="span-sm-5" for="pippkgs">pip Install</label>
						<div class="span-sm-10">
							<input type="text" class="form-control" id="pippkgs" data-bind="value: pippkgs">
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<span class="span-sm-10" style = "color: red; margin-left: 4px; text-align: left;" id="add-prov-library-info"></span>
		  	<button data-bind="click: addPlugin" class="btn btn-primary">Add</button>
			<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancel</button>
		</div>
	  </div>
	</div>
  </div>






<div id="addSample" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="addSampleDialogLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 id="addSampleDialogLabel">Add Workflow</h4>
			</div>
			<div class="modal-body">
				<div class="control-group">
					<div class="span-sm-20">
						<div class="row service-form-group">
							<label class="span-sm-4" for="sampleName">Name</label>
							<div class="span-sm-16">
								<input class="form-control" data-bind="value: name" type="text" id="sampleName" placeholder="Name">
							</div>
						</div>
					</div>
					<div class="span-sm-20">
						<div class="row service-form-group">
							<label class="span-sm-4" for="sampleDesc">Description</label>
							<div class="span-sm-16">
								<input class="form-control" data-bind="value: desc" type="text" id="sampleDesc" placeholder="Description">
							</div>
						</div>
					</div>
					<div class="span-sm-20">
						<hr>
					</div>

					<div class="span-sm-20">
						<div class="span-sm-12">
							<label for="sample">Script:</label>
							<div class="controls">
								<textarea rows="18" style="width: 60%;" id="sample"></textarea>
							</div>	

							<div class="row service-form-group">
								<label class="span-sm-2" for="access">Public</label>
								<div class="span-sm-2">
									<input type="checkbox" id="access" data-bind="checked: access">
								</div>
								<label for="" class="span-sm-5">Share with</label>
								<div class="span-sm-11">
									<select id="wfUserSelection" multiple="multiple" class="form-control" data-bind="options: userList, 
										optionsText: 'name', 
										optionsValue: 'id', 
										selectedOptions: selectedSharingUsers">
									</select>
								</div>
							</div>
						</div>
	
						<div class="span-sm-8">
							<div style="display: flex">
								<h4>Arguments:</h4>
								<button class="btn btn-primary" style="right: 0em; position: absolute;" data-bind="click: addArgs, visible: wfArgs().length == 0">Add</button>	
							</div>
							
							<form role="form" data-bind="foreach: wfArgs" style="overflow-x: hidden; overflow-y: auto; max-height: 45vh;">
								<div class="span-sm-20" style="padding-right: 0;padding-bottom: 5px;">
									<a style="float: right;" class="btn btn-sm btn-primary" title="Add"
										data-bind="click: $parent.addArgs, visible: $index() === ($parent.wfArgs().length-1)"><i
											class="fa fa-plus"></i></a>
									<a style="float: right;" class="btn btn-sm btn-danger" title="Remove"
										data-bind="click: $parent.removeArgs.bind($data)"><i class="fa fa-minus"></i></a>
								</div>
								<div data-bind="foreach: $data.items">
									<div class="row service-form-group">
										<label class="span-sm-6" data-bind="text: key"></label>
										<div class="span-sm-14">
											<input type="text" class="form-control" id="package"
												data-bind="value: value, valueUpdate: 'keyup'">
										</div>
									</div>
								</div>
								<hr data-bind="visible: $index() != ($parent.wfArgs().length-1)">
							</form>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button data-bind="click: addSample" class="btn btn-primary">Add</button>
				<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancel</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="file-upload-dialog" tabindex="-1"
	role="dialog" aria-labelledby="uploadModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<!-- Modal Header -->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">&times;</span> <span class="sr-only">Close</span>
				</button>
				<h4 class="modal-title" id="uploadModalLabel">File Upload</h4>
			</div>

			<!-- Modal Body -->
			<div class="modal-body">
				<form id="upload-file" class="form-horizontal" role="form"
					method=POST enctype=multipart/form-data>

					<div class="form-group row">
						<div class="col-sm-offset-2 col-sm-10">
						 <label for="upload">Choose file(s)</label>
						<input type="file" class="form-control-file" id="upload" multiple>
						</div>
					</div>
					<hr />

					<div class="form-group row">
						<label for="filename" class="col-sm-2 col-form-label">File Name</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" id="inputFilename">
						</div>
					</div>
					
					<div class="form-group row input-group mb-3">
					  <div class="input-group-prepend col-sm-2">
					    <label class="col-form-label" for="inputVisualizer">Visualizers</label>
					  </div>
					  <div class="custom-select col-sm-10">
					  <select class="custom-select" data-bind="options: visualizers, optionsCaption: 'Choose visualizer...'" id="inputVisualizer"></select>
					  </div>
					</div>
					
					<div class="form-group row">
						<label for="inputAnnotations" class="col-sm-2 col-form-label">Annotations</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" id="inputAnnotations">
						</div>
					</div>
					
					<div class="form-group row input-group mb-3">
					  <div class="input-group-prepend col-sm-2">
					    <label class="input-group-text" for="inputMimeType">Mime Types</label>
					  </div>
					  <div class="custom-select col-sm-10">
					  <select class="custom-select" data-bind="options: mimetypes, optionsCaption: 'Choose MIME Type...'" id="inputMimeType"></select>
					  </div>
					</div>

					<div class="form-group row">
						<div class="col-sm-offset-2 col-sm-10">
							<button data-bind="click: upload" type="button"
								class="btn btn-primary" id="upload-file-btn"
								data-dismiss="modal">Upload</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<div id="update-metadata-dialog" class="modal fade" tabindex="=1" role="dialog" aria-labelledby="addDialogLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h3  class="modal-title" id="addDialogLabel">Update Metadata</h3>
			</div>
			<div class="modal-body" style="overflow-x: auto;">
				<form class="form-horizontal">
					<div class="control-group">
						<div class="controls">
							<ul class="nav nav-tabs">
								<li class="active"><a href="#generaltab" data-toggle="tab">General</a></li>
								<li><a href="#visualizertab" data-toggle="tab">Visualizers</a></li>
								<li><a href="#annotationtab" data-toggle="tab">Annotations</a></li>
								<li><a href="#mimetypestab" data-toggle="tab">MIME Types</a></li>
								<li><a href="#propertiestab" data-toggle="tab">Properties</a></li>
							</ul>
							<div class="tab-content ">
								<div class="tab-pane fade in active" id="generaltab">
									<div class="container-fluid">
										<div class="row service-form-group">
											<label class="col-sm-3 control-label" for="filename">Filename</label>
											<div class="col-sm-9">
												<input type="text" id="filename" class="form-control" data-bind="value: filename">
											</div>
										</div>
										<div class="table-wrapper">
											<table class="table table-bordered">
												<thead>
													<tr>
														<th>Name</th>
														<th>Value</th>
													</tr>
												</thead>
												<tbody data-bind="foreach: systemProperties.items">
													<tr>
														<td scope="row" data-bind="text: key"></td>
														<td data-bind="text: value"></td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
								<div class="tab-pane fade" id="visualizertab">
									<div class="container-fluid">
										<div class="table-title">
											<div class="row justify-content-end">
												<div class="col-sm-12">
													<button type="button" class="btn btn-info btn-add-new" data-bind="click: addNewVisualizer">
														<i class="fa fa-plus"></i> Add New
													</button>
												</div>
											</div>
										</div>
										<table class="table table-bordered">
											<thead>
												<tr>
													<th>Name</th>
													<th>Value</th>
													<th class="th-action">Actions</th>
												</tr>
											</thead>
											<tbody data-bind="foreach: visualizers.items">
												<tr>
													<td scope="row"><input class="form-control" type="text" data-bind="text: key, value: key"></td>
													<td><input type="text" class="form-control" data-bind="text: value, value: value"></td>
													<td>
														<a data-bind="click: $parent.addNewVisualizer" title="Add Another" data-toggle="tooltip"><i class="fa fa-plus"></i></a>
														<a data-bind="click: $parent.removeVisualizer" title="Delete" data-toggle="tooltip"><i class="fa fa-trash"></i></a>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
								<div class="tab-pane fade" id="annotationtab">
									<div class="container-fluid">
										<div class="table-title">
											<div class="row justify-content-end">
												<div class="col-sm-12">
													<button type="button" class="btn btn-info btn-add-new" data-bind="click: addNewAnnotation">
														<i class="fa fa-plus"></i> Add New
													</button>
												</div>
											</div>
										</div>
										<table class="table table-bordered">
											<thead>
												<tr>
													<th>Name</th>
													<th>Value</th>
													<th class="th-action">Actions</th>
												</tr>
											</thead>
											<tbody data-bind="foreach: annotations.items">
												<tr>
													<td scope="row"><input type="text" class="form-control" data-bind="text: key, value: key"></td>
													<td><input type="text" class="form-control" data-bind="text: value, value: value"></td>
													<td>
														<a data-bind="click: $parent.addNewAnnotation" title="Add Another" data-toggle="tooltip"><i class="fa fa-plus"></i></a>
														<a data-bind="click: $parent.removeAnnotation" title="Delete" data-toggle="tooltip"><i class="fa fa-trash"></i></a>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
								<div class="tab-pane fade" id="mimetypestab">
									<div class="container-fluid">
										<div class="table-title">
											<div class="row justify-content-end">
												<div class="col-sm-12">
													<button type="button" class="btn btn-info btn-add-new" data-bind="click: addNewMimeType">
														<i class="fa fa-plus"></i> Add New
													</button>
												</div>
											</div>
										</div>
										<table class="table table-bordered">
											<thead>
												<tr>
													<th>Name</th>
													<th>Value</th>
													<th class="th-action">Actions</th>
												</tr>
											</thead>
											<tbody data-bind="foreach: mimetypes.items">
												<tr>
													<td scope="row"><input type="text" data-bind="text: key, value: key" class="form-control"></td>
													<td><input type="text" class="form-control" data-bind="text: value, value: value"></td>
													<td>
														<a title="Add Another" data-toggle="tooltip" data-bind="click: $parent.addNewMimeType"><i class="fa fa-plus"></i></a>
														<a title="Delete" data-toggle="tooltip" data-bind="click: $parent.removeMimeType.bind($data)"><i class="fa fa-trash"></i></a>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
								<div class="tab-pane fade" id="propertiestab">
									<div class="container-fluid">
										<div class="table-title">
											<div class="row justify-content-end">
												<div class="col-sm-12">
													<button type="button" class="btn btn-info btn-add-new" data-bind="click: addNewProperty">
														<i class="fa fa-plus"></i> Add New
													</button>
												</div>
											</div>
										</div>
										<table class="table table-bordered">
											<thead>
												<tr>
													<th>Name</th>
													<th>Value</th>
													<th class="th-action">Actions</th>
												</tr>
											</thead>
											<tbody data-bind="foreach: properties.items">
												<tr>
													<td scope="row"><input class="form-control" type="text" name="key" id=""
															data-bind="text: key, value: key"></td>
													<td><input class="form-control" type="text" name="value" data-bind="text: value, value: value"></td>
													<td>
														<a data-bind="click: $parent.addNewProperty" title="Add Another" data-toggle="tooltip"><i
																class="fa fa-plus"></i></a>
														<a data-bind="click: $parent.removeProperty.bind($data)" title="Delete" data-toggle="tooltip"><i
																class="fa fa-trash"></i></a>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button class="btn btn-primary" data-dismiss="modal" data-bind="event: {click: save}" aria-hidden="true">Update</button>
				<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancel</button>
				<div>
					<span class="label label-default" id="add-metadata-info"></span>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- top:22%; left: 0.8%; width: 21.6%; height: 50%; -->
<div id="filter-dialog" class="modal fade modal-md col-md-3" tabindex="=-1"
	role="dialog" aria-labelledby="filterDialogLabel" aria-hidden="true">
	<div class="modal-content">
		<div class="modal-header filterdialog-header">
			<button type="button" class="close" data-dismiss="modal"
				aria-hidden="true">&times;</button>
			<h5 id="filterDialogLabel"><strong>Search and Filter</strong></h5>
		</div>
		<!-- static-table table-hover no-bottom-margin -->
		<div class="modal-body" style="padding: 5px">
			<div class="table-responsive">
				<table class="table table-bordered " style="display: block;">
					<thead>
						<tr>
							<!-- <th class="filter-dialog-modal-text" style="width: 5%; padding: 0 0 8px 0 ; text-align: center"><i class="fa fa-check-square-o" style="font-size: 2rem"></i></th> -->
							<th class="filter-dialog-modal-text" style="width: 20%">Name</th>
							<th class="filter-dialog-modal-text" style="width:35%">Filter</th>
							<th class="filter-dialog-modal-text" style="width: 9%">Sort</th>
							<th class="filter-dialog-modal-text" style="width: 14%; text-align: center"><i class="fa fa-sort" style="font-size: 2rem"></i></th> 
						</tr>
					</thead>
					<tbody data-bind="foreach: filters">
						<tr>
							<!-- <td>
								<input type="checkbox" data-bind="checked: selected" />
							</td> -->
							<td class="filter-dialog-modal-text" data-bind="text: name"></td>
							<td class="filter-dialog-modal-text filter-value-td" data-bind="descendantsComplete: $parent.formControlCustomization.bind($data)">
								<input type="text" class="form-control" data-bind="value: value">
							</td>
							<td class="filter-dialog-modal-text">
								<button class="btn btn-xs btn-primary" style="background: transparent; border-color: transparent" data-bind="value: sort, click: $parent.toggleSort;"><i data-bind="class : $parent.setSortClass(sort)" class="fa fa-times fa-xs" style="background: transparent; color: black"></i></button>
							</td>
							<td class="filter-dialog-modal-text">
								<div style="display: inline-block">
									<button class="btn btn-xs fa fa-sort-up" style="border-radius: 2px; display: inline-block;" data-bind="disable: $index() === 0, click: $parent.moveUp"
										title="Move Up"></button>
									<button class="btn btn-xs fa fa-sort-down" style="border-radius: 2px; display: inline-block;"
										data-bind="disable: $index() === $parent.filters().length - 1, click: $parent.moveDown" title="Move Down"></button>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="modal-footer">
			<label class="control-label" data-bind="visible: okText() == 'Save'" for="filtername">Name</label>
			<input class="" data-bind="value: name, visible: okText() == 'Save'" type="text" id="filtername"></input>
			<button class="btn btn-primary" data-dismiss="modal" data-bind="click: filter, text: okText" aria-hidden="true"></button>
			<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancel</button>
		</div>
	</div>
</div>


<div id="dataSets-addNew-dialog" class="modal fade in modal-lg" tabindex="=-1"
	role="dialog" aria-labelledby="dataSetsFilterDialogLabel" aria-hidden="true" style="overflow-y: initial">
	<div class="modal-content">
		<div class="modal-header" style="background-color: #337AB7">
			<button type="button" class="close" data-dismiss="modal"
				aria-hidden="true">&times;</button>
			<h5 id="dataSetsFilterDialogLabel"><strong class="datasets-dialog-header">Add New Dataset</strong></h5>
		</div>
		<div class="modal-body" style="overflow-y: auto">
			<div class="container-fluid" style="padding: 0px">
				<form id="frmschemaUpload">
					<div class="form-group row">
						<label class="col-sm-2 col-form-label"><strong>Load Schema:</strong></label>
						<div class="col-sm-4">
							<input type="file" class="form-control-file" id="fileSchemaUpload">
						</div>
					</div>
					<div class="col-sm-3">
						<button class="btn btn-primary" style="margin-left: 133px" data-bind="click: uploadSchema">Load</button>
					</div>
				</form>
			</div>
			<hr>
			<div role="tabpanel">
				<ul class="nav nav-tabs" role="tablist">
					<li role="presentation" class="active" ><a href="#datasetValues" role="tab" data-toggle="tab">Properties</a></li>
					<li role="presentation" class=""><a href="#datasetDateProperties" role="tab" data-toggle="tab">Dates</a></li>
					<li role="presentation" class=""><a href="#datasetAuthor" role="tab" data-toggle="tab">Author</a></li>
					<li role="presentation" class=""><a href="#datasetCreator" role="tab" data-toggle="tab">Creator</a></li>
					<li role="presentation"><a href="#datasetProducer" role="tab" data-toggle="tab">Producer</a></li>
					<li role="presentation" class=""><a href="#datasetPublisher" role="tab" data-toggle="tab">Publisher</a></li>
					<li role="presentation" class=""><a href="#datasetEditor" role="tab" data-toggle="tab">Editor</a></li>
				</ul>
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="datasetValues">
						<div class="table-responsive">
							<table class="table table-primary table-bordered table-striped table-dark">
								<thead>
									<tr>
										<th class="dataset-dialog-tableheader" style="width: 20%">Name</th>
										<th class="dataset-dialog-tableheader" style="width: 35%">Value</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: dataset.SingularProperty">
									<tr>
										<td class="filter-dialog-modal-text" data-bind="text: name"></td>
										<td class="filter-dialog-modal-text">
											<input type="text" class="form-control" data-bind="value: value">
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="datasetAuthor">
						<div class="table-responsive">
							<table class="table table-primary table-bordered table-striped table-dark" >
								<thead>
									<tr>
										<th class="dataset-dialog-tableheader" style="width: 20%">Name</th>
										<th class="dataset-dialog-tableheader" style="width: 35%">Value</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: dataset.AuthorProperty">
									<tr>
										<td class="filter-dialog-modal-text" data-bind="text: name"></td>
										<td class="filter-dialog-modal-text">
											<input type="text" class="form-control" data-bind="value: value">
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="datasetDateProperties">
						<div class="table-responsive">
							<table class="table table-primary table-bordered table-striped table-dark" >
								<thead>
									<tr>
										<th class="dataset-dialog-tableheader" style="width: 20%">Name</th>
										<th class="dataset-dialog-tableheader" style="width: 35%">Value</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: dataset.DateProperty">
									<tr>
										<td class="filter-dialog-modal-text" data-bind="text: name"></td>
										<td class="filter-dialog-modal-text">
											<input type="date" class="form-control" style="line-height: 15px" data-bind="value: value">
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="datasetCreator">
						<div class="table-responsive">
							<table class="table table-primary table-bordered table-striped table-dark" >
								<thead>
									<tr>
										<th class="dataset-dialog-tableheader" style="width: 20%">Name</th>
										<th class="dataset-dialog-tableheader" style="width: 35%">Value</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: dataset.CreatorProperty">
									<tr>
										<td class="filter-dialog-modal-text" data-bind="text: name"></td>
										<td class="filter-dialog-modal-text">
											<input type="text" class="form-control" data-bind="value: value">
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="datasetProducer">
						<div class="table-responsive">
							<table class="table table-primary table-bordered table-striped table-dark" >
								<thead>
									<tr>
										<th class="dataset-dialog-tableheader" style="width: 20%">Name</th>
										<th class="dataset-dialog-tableheader" style="width: 35%">Value</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: dataset.ProducerProperty">
									<tr>
										<td class="filter-dialog-modal-text" data-bind="text: name"></td>
										<td class="filter-dialog-modal-text">
											<input type="text" class="form-control" data-bind="value: value">
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="datasetPublisher">
						<div class="table-responsive">
							<table class="table table-primary table-bordered table-striped table-dark" >
								<thead>
									<tr>
										<th class="dataset-dialog-tableheader" style="width: 20%">Name</th>
										<th class="dataset-dialog-tableheader" style="width: 35%">Value</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: dataset.PublisherProperty">
									<tr>
										<td class="filter-dialog-modal-text" data-bind="text: name"></td>
										<td class="filter-dialog-modal-text">
											<input type="text" class="form-control" data-bind="value: value">
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="datasetEditor">
						<div class="table-responsive">
							<table class="table table-primary table-bordered table-striped table-dark" >
								<thead>
									<tr>
										<th class="dataset-dialog-tableheader" style="width: 20%">Name</th>
										<th class="dataset-dialog-tableheader" style="width: 35%">Value</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: dataset.EditorProperty">
									<tr>
										<td class="filter-dialog-modal-text" data-bind="text: name"></td>
										<td class="filter-dialog-modal-text">
											<input type="text" class="form-control" data-bind="value: value">
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button class="btn btn-primary" data-dismiss="modal" data-bind="click : update, visible : isUpdate()">Update</button>
			<button class="btn btn-primary" data-dismiss="modal" data-bind="click: saveNew, visible : !isUpdate()" aria-hidden="true">Save</button>
			<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancel</button>
		</div>
	</div>
</div>
<!-- <div class="modal fade" id="rename-filefolder-dialog" tabindex="-1" role="dialog" aria-labelledby="renameModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            Modal Header
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                       <span aria-hidden="true">&times;</span>
                       <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="renameModalLabel">
                    File/Folder Rename
                </h4>
            </div>
            
            Modal Body
            <div class="modal-body">
                <form id="rename-filefolder" class="form-horizontal" role="form" method=POST enctype=multipart/form-data>
                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <input type="text" name="rename-filefolder-text" id="rename-filefolder-text">
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                      <button type="button" class="btn btn-default" id="rename-filefolder-btn" data-dismiss="modal" data-bind="click: rename">Rename</button>
                    </div>
                  </div>
                </form>
            </div>
        </div>
    </div>
</div> -->

<div id="edit" class="modal fade" tabindex="=1" role="dialog" aria-labelledby="editDialogLabel" aria-hidden="true" style="background: #fff">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="editDialogLabel">Edit Task</h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal">
            <div class="control-group">
                <label class="control-label" for="inputTask">Task</label>
                <div class="controls">
                    <input data-bind="value: module" type="text" id="inputTask" placeholder="Module" style="width: 150px;">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputDescription">Name</label>
                <div class="controls">
                    <input data-bind="value: name" type="text" id="inputDescription" placeholder="Name" style="width: 300px;">
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <label class="checkbox">
                        <input type="checkbox"> Done
                    </label>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button data-bind="click:editTask" class="btn btn-primary">Update Task</button>
        <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
    </div>
</div>
		
<!-- <div id="metadataView" class="container-fluid" aria-hidden="true"> -->
<!-- 	<h4>Metadata information</h4> -->
<!-- 	<div class="row-fluid mb-3"> -->
<!-- 		<div class="col-6 themed-grid-col"> -->
<!-- 			<div class="row-fluid mb-3"> -->
<!-- 				<span>System Properties</span> -->
				
<!-- 				<div data-bind="foreach: systemProperties.items"> -->
<!-- 					<div class="row-fluid" data-bind="css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }"> -->
<!-- 						<div class="col-6 themed-grid-col"> -->
<!-- 							<span data-bind="text: key"></span>  -->
<!-- 						</div> -->
<!-- 						<div class="col-6 themed-grid-col"> -->
<!-- 							<span data-bind="text: value"></span>  -->
<!-- 						</div> -->
<!-- 					</div> -->
<!-- 				</div> -->
<!-- 			</div> -->
<!-- 			<div class="row-fluid mb-3"> -->
<!-- 				<span>Visualizers</span> -->
<!-- 			</div> -->
<!-- 			<div class="row-fluid"> -->
<!-- 				<span>Visualizers</span> -->
<!-- 			</div> -->
<!-- 		</div> -->
<!-- 		<div class="col-6 themed-grid-col"> -->
<!-- 			<div class="row-fluid"> -->
<!-- 				<span>Visualizers</span> -->
<!-- 			</div> -->
<!-- 			<div class="row-fluid"> -->
<!-- 				<span>Visualizers</span> -->
<!-- 			</div> -->
<!-- 			<div class="row-fluid"> -->
<!-- 				<span>Visualizers</span> -->
<!-- 			</div> -->
<!-- 		</div> -->
<!-- 	</div> -->
<!-- </div> -->

<div class="modal fade" id="browserItemModal" tabindex="-1" role="dialog" aria-labelledby="browserItemModal"
	aria-hidden="true">
	<div class="modal-dialog modal-lg modal-xl" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" data-bind="text: itemName">Modal title</h5>
				<!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button> -->
				<button class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top" title="Toggle fullscreen" id="btnBrowserModalFullscreen">
					<i class="glyphicon glyphicon-resize-full"></i>
				</button>
				<button class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top" title="Open in new window" id="btnOpenNewWindow" data-bind="event: {click: openInNewTab.bind($data)}">
					<i class="glyphicon glyphicon-new-window"></i>
				</button>
			</div>
			<div class="modal-body">
				<!-- <img id="browserImagePopup" class="center" src="" alt=""> -->
				<iframe id="browserItemPopup" class="center" src="" frameborder="0" data-bind="attr:{src: itemSrc}"></iframe>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<div id="browserView" class="container-fluid" aria-hidden="true" style="display:none; ">
	<div id="browserViewList" class="col-sm-12 border border-primary" data-bind="foreach : {data: browserItems, afterRender: browserItemCaptionCss}, visible : isListView()">
		<div class="col-sm-6 form-group" data-bind="event : {dblclick: $parent.openInNewTab.bind($data)}, browserItemHover : $data">
			<figure style="display: inline-block">
				<img height="50rem" width="45rem" data-bind="attr: {src: imgPath, alt: itemName}">
				<figcaption data-bind="text: itemName"></figcaption>
			</figure>
		</div>
	</div>
	<div id="browserViewDetails" class="col-sm-12 border border-primary" data-bind="visible: !isListView()">
		<div id="browserViewDetailsHeader" class="row" style="text-align: center; background-color: #B7DEFF;"> 
			<label data-bind="text: itemName"> Item Details </label>
			<!-- <button class="btn btn-primary pull-right" data-toggle="tooltip" data-placement="top" title="Toggle fullscreen"
				id="btnBrowserModalFullscreen">
				<i class="glyphicon glyphicon-resize-full"></i>
			</button> -->
			<button class="btn btn-primary btn-xs pull-right" data-toggle="tooltip" data-placement="top" title="Open in new window"
				data-bind="event: {click: openIntoNewWindow.bind($data)}">
				<i class="glyphicon glyphicon-new-window"></i>
			</button>
		</div>
		<iframe id="browserItemDetails" class="center" src="" frameborder="0" data-bind="attr:{src: itemSrc}" style="display: block" width="100%" height="100%"></iframe>
	</div>
	<div class="col-sm-12" data-bind="visible: !isListView()">
		<hr>
	</div>
	<div id="browserTabCarousel" class="owl-carousel col-sm-12" style=" bottom: 0%; position: relative;" data-bind="visible: !isListView(), foreach: {data: sliderItems , afterRender: sliderController.bind($data)}">
		<div style="display: block;" data-bind="event: {click : $parent.openInDetailsView.bind($data)}, attr: {title: itemName}">
			<figure style="display: inline-block" data-bind="event: {click : $parent.openInDetailsView.bind($data)}">
				<img height="50px" width="45px" data-bind="attr: {src: imgPath, alt: itemName}, css: {'carousel-default-figure': isStatic }">
				<figcaption class="figcaption-clipped" data-bind="text: itemName"></figcaption>
			</figure>
		</div>
	</div>
</div>

<div id="datasetView" class="container-fluid" aria-hidden="true" style="display:none">
	<div class="col-sm-12" data-bind="visible : hasProperties">
		<h4 class="datasetView-header">Properties</h4>
		<div class="container-fluid datasetView-tab-area">
			<div class="form-group" data-bind="visible: name">
				<label>Name: </label>
				<label class="datasetView-tab-content" data-bind="text: name"></label>
			</div>
			<div class = "form-group" data-bind="visible : url">
				<label  >Url: </label>
				<label class="datasetView-tab-content"><strong><a data-bind="attr:{href : url}, text: url" target="_blank"></a></strong></label>
			 </div>
			 <div class="form-group" data-bind="visible: description">
					<label>Description: </label>
					<label class="datasetView-tab-content" data-bind="text: description"></label>
				 </div>
			 <div class="form-group" data-bind="visible: version">
				<label>Version: </label>
				<label class="datasetView-tab-content" data-bind="text: version"></label>
			 </div>
			 <div class="form-group" data-bind="visible: text">
				<label >Text: </label>
				<label class="datasetView-tab-content" data-bind="text: text"></label>
			 </div>
			 
			 <div class="form-group" data-bind="visible: sourceOrganization">
				<label>Source Organization: </label>
				<label class="datasetView-tab-content" data-bind="text: sourceOrganization"></label>
			 </div>
			 <div class="form-group" data-bind="visible: license">
				<label >License: </label>
				<label class="datasetView-tab-content" data-bind="text: license"></label>
			 </div>
			 <div class="form-group" data-bind="visible: keywords">
				<label>Keywords: </label>
				<label class="datasetView-tab-content" data-bind="text: keywords"></label>
			 </div>
			 <div class="form-group" data-bind="visible: accessMode">
				<label>Access Mode: </label>
				<label class="datasetView-tab-content" data-bind="text: accessMode"></label>
			 </div>
			 <div class="form-group" data-bind="visible: about">
				<label>About: </label>
				<label class="datasetView-tab-content" data-bind="text: about"></label>
			 </div>
		</div>
	</div>
	<div class="col-sm-12" data-bind="visible: hasDates">
		<h4 class="datasetView-header">Dates</h4>
		<div class="container-fluid datasetView-tab-area">
			<div class="form-group" data-bind="visible: expires">
				<label>Expires: </label>
				<label class="datasetView-tab-content" data-bind="text: expires"></label>
			</div>
			<div class="form-group" data-bind="visible: datePublished">
				<label>Date Published: </label>
				<label class="datasetView-tab-content" data-bind="text: datePublished"></label>
			</div>
			<div class="form-group" data-bind="visible: dateModified">
				<label>Date Modified: </label>
				<label class="datasetView-tab-content" data-bind="text: dateModified"></label>
			</div>
			<div class="form-group" data-bind="visible: dateCreated">
				<label>Date Created: </label>
				<label class="datasetView-tab-content" data-bind="text: dateCreated"></label>
			</div>
		</div>
	</div>			
	<div class="col-sm-12" data-bind="visible : hasAuthor">
		<h4 class="datasetView-header">Author</h4>
		<div class="container-fluid datasetView-tab-area">
			<div class="form-group" data-bind="visible: authGivenName">
				<label>Given Name: </label>
				<label class="datasetView-tab-content" data-bind="text: authGivenName"></label>
			</div>
			<div class="form-group" data-bind="visible: authFamilyName">
				<label>Family Name: </label>
				<label class="datasetView-tab-content" data-bind="text: authFamilyName"></label>
			</div>
			<div class="form-group" data-bind="visible: authEmail">
				<label>Email: </label>
				<label class="datasetView-tab-content" data-bind="text: authEmail"></label>
			</div>
			<div class="form-group" data-bind="visible: authTelephone">
				<label>Telephone: </label>
				<label class="datasetView-tab-content" data-bind="text: authTelephone"></label>
			</div>
			<div class="form-group" data-bind="visible: authGender">
				<label>Gender: </label>
				<label class="datasetView-tab-content" data-bind="text: authGender"></label>
			</div>
		</div>
	</div>
	<div class="col-sm-12" data-bind="visible : hasCreator">
		<h4 class="datasetView-header">Creator</h4>
		<div class="container-fluid datasetView-tab-area">
			<div class="form-group" data-bind="visible: crtGivenName">
				<label>Given Name: </label>
				<label class="datasetView-tab-content" data-bind="text: crtGivenName"></label>
			</div>
			<div class="form-group" data-bind="visible: crtFamilyName">
				<label>Family Name: </label>
				<label class="datasetView-tab-content" data-bind="text: crtFamilyName"></label>
			</div>
			<div class="form-group" data-bind="visible: crtEmail">
				<label>Email: </label>
				<label class="datasetView-tab-content" data-bind="text: crtEmail"></label>
			</div>
			<div class="form-group" data-bind="visible: crtTelephone">
				<label>Telephone: </label>
				<label class="datasetView-tab-content" data-bind="text: crtTelephone"></label>
			</div>
			<div class="form-group" data-bind="visible: crtGender">
				<label>Gender: </label>
				<label class="datasetView-tab-content" data-bind="text: crtGender"></label>
			</div>
		</div>
	</div>
	<div class="col-sm-12" data-bind="visible: hasProducer">
		<h4 class="datasetView-header">Producer</h4>
		<div class="container-fluid datasetView-tab-area">
			<div class="form-group" data-bind="visible: prdcGivenName">
				<label>Given Name: </label>
				<label class="datasetView-tab-content" data-bind="text: prdcGivenName"></label>
			</div>
			<div class="form-group" data-bind="visible: prdcFamilyName">
				<label>Family Name: </label>
				<label class="datasetView-tab-content" data-bind="text: prdcFamilyName"></label>
			</div>
			<div class="form-group" data-bind="visible: prdcEmail">
				<label>Email: </label>
				<label class="datasetView-tab-content" data-bind="text: prdcEmail"></label>
			</div>
			<div class="form-group" data-bind="visible: prdcTelephone">
				<label>Telephone: </label>
				<label class="datasetView-tab-content" data-bind="text: prdcTelephone"></label>
			</div>
			<div class="form-group" data-bind="visible: prdcGender">
				<label>Gender: </label>
				<label class="datasetView-tab-content" data-bind="text: prdcGender"></label>
			</div>
		</div>
	</div>
	<div class="col-sm-12" data-bind="visible: hasPublisher">
		<h4 class="datasetView-header">Publisher</h4>
		<div class="container-fluid datasetView-tab-area">
			<div class="form-group" data-bind="visible: pblsGivenName">
				<label>Given Name: </label>
				<label class="datasetView-tab-content" data-bind="text: pblsGivenName"></label>
			</div>
			<div class="form-group" data-bind="visible: pblsFamilyName">
				<label>Family Name: </label>
				<label class="datasetView-tab-content" data-bind="text: pblsFamilyName"></label>
			</div>
			<div class="form-group" data-bind="visible: pblsEmail">
				<label>Email: </label>
				<label class="datasetView-tab-content" data-bind="text: pblsEmail"></label>
			</div>
			<div class="form-group" data-bind="visible: pblsTelephone">
				<label>Telephone: </label>
				<label class="datasetView-tab-content" data-bind="text: pblsTelephone"></label>
			</div>
			<div class="form-group" data-bind="visible: pblsGender">
				<label>Gender: </label>
				<label class="datasetView-tab-content" data-bind="text: pblsGender"></label>
			</div>
		</div>
	</div>
	<div class="col-sm-12" data-bind="visible : hasEditor">
		<h4 class="datasetView-header">Editor</h4>
		<div class="container-fluid datasetView-tab-area">
			<div class="form-group" data-bind="visible: edtGivenName">
				<label>Given Name: </label>
				<label class="datasetView-tab-content" data-bind="text: edtGivenName"></label>
			</div>
			<div class="form-group" data-bind="visible: edtFamilyName">
				<label>Family Name: </label>
				<label class="datasetView-tab-content" data-bind="text: edtFamilyName"></label>
			</div>
			<div class="form-group" data-bind="visible: edtEmail">
				<label>Email: </label>
				<label class="datasetView-tab-content" data-bind="text: edtEmail"></label>
			</div>
			<div class="form-group" data-bind="visible: edtTelephone">
				<label>Telephone: </label>
				<label class="datasetView-tab-content" data-bind="text: edtTelephone"></label>
			</div>
			<div class="form-group" data-bind="visible: edtGender">
				<label>Gender: </label>
				<label class="datasetView-tab-content" data-bind="text: edtGender"></label>
			</div>
		</div>
	</div>
</div>

<div id="metadataView" class="container-fluid" aria-hidden="true" style="display:none">
	<h3 class="text-info mx-auto">Metadata Information</h3>
	
	<h4 class="text-info">System Properties</h4>
	<table class="table" data-bind="foreach: systemProperties.items">
		<tbody>
			<tr>
				<th scope="row" data-bind="text: key"></th>
				<td data-bind="text: value"></td>
			</tr>
		</tbody>
	</table>
	
	<h4 class="text-info">Visualizers</h4>
	<table class="table" data-bind="foreach: visualizers.items">
		<tbody>
			<tr>
				<th scope="row" data-bind="text: key"></th>
				<td data-bind="text: value"></td>
			</tr>
		</tbody>
	</table>
	
	<h4 class="text-info">Annotations</h4>
	<table class="table" data-bind="foreach: annotations.items">
		<tbody>
			<tr>
				<th scope="row" data-bind="text: value"></th>
			</tr>
		</tbody>
	</table>
	
	<h4 class="text-info">MIME Types</h4>
	<table class="table" data-bind="foreach: mimetypes.items">
		<tbody>
			<tr>
				<th scope="row" data-bind="text: key"></th>
				<td data-bind="text: value"></td>
			</tr>
		</tbody>
	</table>
	
	<h4 class="text-info">Properties</h4>
	<table class="table" data-bind="foreach: properties.items">
		<tbody>
			<tr>
				<th scope="row" data-bind="text: key"></th>
				<td data-bind="text: value"></td>
			</tr>
		</tbody>
	</table>
</div>

<div id="filterhistoryView" class="container-fluid" aria-hidden="true" style="display:none">
	<div class="table-filterhistory">	
		<table class="table table-bordered">
			<thead class="filterhistory-thead">
				<tr>
					<th>Name</th>
					<th>Filter</th>
					<th>Creation Time</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody data-bind="foreach: histories">
				<tr>
					<td scope="row" data-bind="text: name"></td>
					<td data-bind="text: value"></td>
					<td data-bind="text: created_on"></td>
					<td>
						<a title="Add" data-toggle="tooltip" data-bind="click: $parent.openFilterDialog.bind($data, true)"><i class="material-icons">&#xE03B;</i></a>
						<!-- <a title="Delete" data-toggle="tooltip" data-bind="click: $parent.deleteFilter.bind($data)"><i class="fa fa-trash"></i></a> -->
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>

<!-- 
<div id="metadataView" class="container-fluid" aria-hidden="true">
	<h3>Metadata information</h3>
	<div class="row-fluid mb-3">
    <div class="col-md-6 themed-grid-col">
	   	<div class="row-fluid mb-3">
			<span>System Properties</span>modal-body
		
			<div data-bind="foreach: systemProperties.items">
				<div class="row-fluid mb-3" data-bind="css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }">
					<div class="col-md-6 themed-grid-col">
						<span data-bind="text: key"></span> 
					</div>
					<div class="col-md-6 themed-grid-col">
						<span data-bind="text: value"></span> 
					</div>
				</div>
			</div>
	   </div>
			
		<div class="row-fluid mb-3">
			<span>Visualizers</span>
			<div data-bind="foreach: visualizers.items">
				<div class="row-fluid mb-3" data-bind="css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }">
					<div class="col-md-6 themed-grid-col">
						<span data-bind="text: key"></span> 
					</div>
					<div class="col-md-6 themed-grid-col">
						<span data-bind="text: value"></span> 
					</div>
				</div>
			</div>
		</div>
			
		<div class="row-fluid mb-3">
			<span>Annotations</span>
			<div data-bind="foreach: annotations">
				<div class="row-fluid mb-3" data-bind="css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }">
					<div class="col themed-grid-col">
						<span data-bind="text: $data"></span> 
					</div>
				</div>
			</div>
		</div>
    </div>
    <div class="col-md-6 themed-grid-col">
    	<div class="row-fluid">
			<span>Mime Types</span>
			<div data-bind="foreach: mimetypes">
				<div class="row-fluid mb-3" data-bind="css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }">
					<div class="col themed-grid-col">
						<span data-bind="text: $rawData"></span> 
					</div>
				</div>
			</div>
		</div>
			
    	<div class="row-fluid mb-3">
			<span>Properties</span>
			
			<div data-bind="foreach: properties.items">
				<div class="row-fluid mb-3" data-bind="css: { 'odd-row': $index() % 2 === 0, 'even-row': $index() % 2 === 1 }">
					<div class="col-md-6 themed-grid-col">
						<span data-bind="text: key"></span> 
					</div>
					<div class="col-md-6 themed-grid-col">
						<span data-bind="text: value"></span> 
					</div>
				</div>
			</div>
		</div>
    </div>
  </div>
</div>
 -->
<div class="modal fade" id="save-needed" tabindex="-1" role="dialog" aria-labelledby="saveNeededModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                       <span aria-hidden="true">&times;</span>
                       <span class="sr-only">Close</span>
                </button>
            </div>
            
            <!-- Modal Body -->
            <div class="modal-body">
                <h4 class="modal-title" id="saveNeededModalLabel">
                    Do you want to save the changes of the current workflow?
                </h4>
            </div>
            <div class="modal-footer">
                 <button type="button" class="btn btn-default" data-dismiss="modal" id="save-needed-yes" data-dismiss="modal">Yes</button>
                 <button type="button" class="btn" id="save-needed-no" data-dismiss="modal">No</button>
            </div>
        </div>
    </div>
</div>


<div class="modal" role="dialog" tabindex="-1" id="saveLayout">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Save new layout</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="form-group row">
					<label for="" class="col-sm-3 form-label">Layout Name:</label>
					<div class="col-sm-8">
						<input type="text" class="form-control" data-bind="value: newLayoutName">
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button class="btn btn-primary" data-dismiss="modal" data-bind="click: addNewLayout"> Save</button>
				<button class="btn btn-danger" data-dismiss="modal" > Cancel</button>
			</div>
		</div>
	</div>
</div>

<div id="modalShareService" class="modal fade" tabindex="=1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-md" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 id="addSampleDialogLabel">Service Sharing</h4>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row service-form-group">
						<label class="span-sm-2" for="access">Public</label>
						<div class="span-sm-2">
							<input type="checkbox" data-bind="checked: access">
						</div>
						<label for="" class="span-sm-4">Share with</label>
						<div class="span-sm-12">
							<select id="ddlShareService" multiple="multiple" class="form-control" data-bind="options: userList, 
																 optionsText: 'name', 
																 optionsValue: 'id', 
																 selectedOptions: selectedSharedUsers">
							</select>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button data-bind="click: saveServiceSharing" class="btn btn-primary">Save</button>
				<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancel</button>
			</div>
		</div>
	</div>
</div>

<div id="wfCompareSelection" class="modal fade" tabindex="=1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-md" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4>Workflow Comparison</h4>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row service-form-group" style="display: flex;">
						<div>
							<label>Select Workflow</label>
							<div>
								<select id="compareWf1" class="form-control" data-bind="options: wfList, 
																						optionsText: 'name', 
																						optionsValue: 'id',
																						selectedOptions: selectedWfId1,
																						event:{ change: wfSelectionChange}">
								</select>
							</div>
						</div>

						<div class="vl"></div>
						
						<div style="right: 1em; position: absolute;">
							<label>Select Workflow</label>
							<div>
								<select id="compareWf2" class="form-control" data-bind="options: wfList, 
																						optionsText: 'name', 
																						optionsValue: 'id',
																						selectedOptions: selectedWfId2,
																						event:{ change: wfSelectionChange}">
								</select>
							</div>
						</div>
					</div>

					<div id="versionCompare" class="row service-form-group">
						<hr>
						<div style="display: flex;">
							<div>
								<label>Select Version</label>
								<div>
									<select id="compareWfVersion1" class="form-control" data-bind="options: wfVersionList, 
																							optionsText: 'name', 
																							optionsValue: 'hex',
																							selectedOptions: selectedWfVersionId1,
																							event:{ change: wfVersionSelectionChange}">
									</select>
								</div>
							</div>

							<div class="vl"></div>
							
							<div style="right: 15px; position: absolute;">
								<label>Select Version</label>
								<div>
									<select id="compareWfVersion2" class="form-control" data-bind="options: wfVersionList, 
																							optionsText: 'name', 
																							optionsValue: 'hex',
																							selectedOptions: selectedWfVersionId2,
																							event:{ change: wfVersionSelectionChange}">
									</select>
								</div>
							</div>
						</div>
						<span id="wfVersionSelectionAlert" style="color: red;"></span>
					</div>
				</div>
			</div>

			<div class="modal-footer">
				<button data-bind="click: compareSelectedWf" class="btn btn-primary">Compare</button>
				<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancel</button>
			</div>

		</div>
	</div>
</div>
<!-- Monitor Modal-->
<div id="monitorModal" class="modal fade">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>
			
			<div class="modal-body">
				<p id="taskName"></p>
				<p id="taskID"></p>
				<p id="taskStatus"></p>

				<div style="width: 750px; height: 500px; z-index: 2; position: relative;" id="monitorGraph"></div>
				<div id="monitorDiagramOverview"></div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<!-- showMessage Modal on prov graph node click-->
<div id="showMessageModal" class="modal fade" tabindex="-1" role="dialog" data-keyboard="false" data-backdrop="false" aria-labelledby="showMessageModalLabel">
	<div class="modal-dialog" role="document" style="width: 22vw">
		<div class="modal-content">
			<div class="modal-header" style="padding: 1vh">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 id="NodeName" class="modal-title"></h4>
			</div>
			
			<div class="modal-body" style="padding: 0;">
				<ul id="NodeInfo"></ul>
			</div>
		</div>
	</div>
</div>

{% endblock %}

{% block scripts %}

<script type="text/javascript">
    var refreshId = 0;
    var workflowId = 0;
    var reportId = 0;
    var isDirty = false;
    var username = "{{ username }}";
	var currentBiowlTab;
	
	var exmplReturns = ko.observableArray();
	var exmplParams = ko.observableArray();
	var scidatapath ="{{ config['REACT_APP_API_URL'] }}";
	   
   function copy2Editor(serviceURL) {
    	 $.ajax({
             url: serviceURL
         })
         .then(function(content) {
             // Set the tooltip content upon successful retrieval
             if (!content) {
             	content = "";
             }
             else {
				exmpl = '';
				paramNo=0;
				content = JSON.parse(content);
				
				exmplReturns().forEach(function (retrn){
					exmpl += retrn.value + ','
				});
				if(exmplReturns().length > 0){
					exmpl = exmpl.substring(0, exmpl.length - 1);
					exmpl += " = "
				}
				exmpl += content.package + '.' + content.name + '(';
				// exmplParams().forEach(function (param){
				// 	if(param.id == "param "+ ++paramNo+" outdir"){
				// 		exmpl = exmpl.substring(0, exmpl.length - 1);
				// 		exmpl += "='" + param.value + "',"
				// 	}
				// 	else
				// 		exmpl += param.value + ','
				// });

				exmplParams().forEach(function (param){
					exmpl += param.value + ','
				});
				exmpl = exmpl.substring(0, exmpl.length - 1);
				exmpl += ")";

				console.log(exmplReturns())
				console.log(exmplParams())

				var pos = editor.selection.getCursor();             
				editor.session.insert(pos, exmpl + "\r\n");
				editor.focus();
            }
         });
	};

	 function initExmplDom(serviceURL) {		 
    	 $.ajax({
             url: serviceURL
         })
         .then(function(content) {
             // create init DOM for arguments upon successful retrieval
             if (!content) {
             	content = "";
             }
             else {
				content = JSON.parse(content);
				 
				if(exmplParams())
					exmplParams.removeAll();
				 if(exmplReturns())
					exmplReturns.removeAll();				 
				 

                 if (content.package && content.name && content.params && content.returns) {
						retrnNo = 0, paramNo = 0;

						if(Array.isArray(content.returns)){
							content.returns.forEach(function (retrn){
								exmplReturns().push({
									id: 'return ' + ++retrnNo,
									value: retrn.name
								});
							});
						}
						else{
							exmplReturns().push({
								id: 'return ' + ++retrnNo,
								value: content.returns
							});
						}

						if(Array.isArray(content.params)){
							content.params.forEach(function (param){
								if (param.default !== undefined) {
									exmplParams().push({
										id: 'param ' + ++paramNo,
										value: param.name,
										default: param.default
									});
								}
								else{
									exmplParams().push({
										id: 'param ' + ++paramNo,
										value: param.name
									});
								}
								// if(param.name == "outdir"){
								// 	exmplParams().push({
								// 	id: 'param '+ ++paramNo +' outdir',
								// 	value: param.default
								// });
								// }
							});
						}
						else{
							if (param.default !== undefined) {
								exmplParams().push({
									id: 'param ' + ++paramNo,
									value: content.params,
									default: content.default
								});
							}
							else{
								exmplParams().push({
									id: 'param ' + ++paramNo,
									value: content.params
								});
							}
						}
					}
             	}
         });
	};
	
	function editBoxSize(elem){
		elem.style.width = elem.value.length + 'ch';

		elem.style.borderColor = 'blue';

		if(event.keyCode == 32){
			elem.style.borderColor = 'red';
			return false;
		}
	}

	function editParam(elem) {			
		if(elem.name == 'Return'){
			exmplReturns().forEach(function (item){
				if(item.id == elem.id)
					item.value = elem.value;
			});
		}
			
		if(elem.name == 'Param'){
			exmplParams().forEach(function (item){
				if(item.id == elem.id)
					item.value = elem.value;
			});
		}		
	}
    
	function showBrowserItemModal(itemSrc, itemName) {
			$("#browserItemModal").find('h5').html(itemName);
			var iframe = $("#browserItemModal").find('iframe');

			$(iframe).attr('src', itemSrc);
			$(iframe).height($('#browsertab').height()).width('100%');
			setTimeout(function () {
				$('#browserItemModal').modal('show');
			}, 200);

	}
	
    $(window).on('load', function() {
    	 
    	centerDialog = function(dlg) {
            var windowHeight = $(window).height();
            var windowWidth = $(window).width();
            var boxHeight = dlg.height();
            var boxWidth = dlg.width();
            dlg.css({'margin-left' : ((windowWidth - boxWidth )/2), 'margin-top' : ((windowHeight - boxHeight)/2)});
        }
    	
		$('#tree').on("dblclick.jstree", function (e) {
		 	  var tree = $(this).jstree();
		 	  var node = tree.get_node(event.target);
		 	  copyDataPathToEditor(node.original);
		});
	
		
    	$('#refresh').hide();
        
        $('.draggable-samples').each(function() {
            // inner scope
            var phrase = $(this);
            
            $(this).find('div.draggable-sample').each(function() {
                // cache jquery object
                var current = $(this);
                current.draggable({
                    revert : 'invalid',
                    stack : '.draggable-sample',
                    helper : 'clone'
                });
            });
        });
		
        
        
    });

    ajaxcalls = new AjaxCalls('mainulhossain@gmail.com', 'mainul');
    
//     $('#tree').bind('mousewheel', function(e) {
//     	  $(this).scrollTop($(this).scrollTop() - e.originalEvent.wheelDeltaY);
//     	  return false;
//     	});
    
    // Create the View Model.
    
   // Last trigger node Id
   var lastSelectedNodeId = null;
   // Last time trigger 
   var lastSelectTime = null;
   
   // Custom business method 
   function copyDataPathToEditor(data){
       var pos = editor.selection.getCursor();
       text = editor.session.getLine(pos.row);
       if (text !== undefined && text.length != 0)
    	   editor.session.insert(pos,  "'" + data.path + "'");
       else
    	   editor.session.insert(pos,  "data = '" + data.path + "'\r\n");
       editor.focus();
   }
   
   function loadMetaData(path){
	   metadataViewModel.load(path);
		if ($("#metatab").length == 0) {
			createNewTab("metatab", "Metadata",  "fade in scriptstyle");
		}
   }
   
	function showMetadata(path) {
		loadMetaData(path);
		if ($("#metadataView").parent('div#metatab').length == 0)
		{
			$('#metatab').append($("#metadataView"));
			$("#metadataView").show();
		}
	}
	
	function loadFilterHistory(){
		filterViewModel.loadHistory();
		if ($("#filterhistorytab").length == 0) {
			createNewTab("filterhistory", "Filter History",  "fade in scriptstyle");
		}
    }
   
	function showFilterHistory() {
		loadFilterHistory();
		if ($("#filterhistoryView").parent('div#filterhistorytab').length == 0) {
			$('#filterhistorytab').append($("#filterhistoryView"));
			$("#filterhistoryView").show();
		}
	}

	function copyProvSnippetToEditor(data){
       var pos = editor.selection.getCursor();
	   var content = "data = Data.Get(path = '"+ data.path +"')"
					 +"\r\nprint(View.Graph(data))"; 
					 
	   editor.session.insert(pos, content + "\r\n");
       editor.focus();
   }
	
function typeInTextarea(el, newText) {
  var start = el.selectionStart;
  var end = el.selectionEnd;
  var text = el.value;

  var before = "";
  var after = "";
  if (text != null) {
	if (start != null)
		before =  text.substring(0, start);
	else
		start = text.length;
		
	if (end != null)
		after = text.substring(end, text.length);
  }
  else
	start = 0;
  
  el.value = (before + newText + after)
  el.selectionStart = el.selectionEnd = start + newText.length
  el.focus()
}
   
   function serviceHelpRef(href) {
	   if (href) {
		   return "<a href='static/" + href + "' target='_blank'>" + "More...</a>";
	   }
	   else {
		   return "";
	   }
   }
   
/* 	ko.bindingHandlers.qTip = {
	    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
	        $(element).qtip({
				style: {
                	classes: 'qtip-bootstrap'
            	},
				content: {
	                text: function(event, api) {
	                	var url = "/functions?tooltip&name=" + viewModel.name() + "&package=" + viewModel.package();
	                    $.ajax({
	                        url: url
	                    })
	                    .then(function(content) {
	                        // Set the tooltip content upon successful retrieval
	                        if (!content) {
	                        	content = "";
	                        }
	                        else {
		                        content = JSON.parse(content);
		                        tooltip = "<p>Name: " + content.name + (content.package && content.package.length ? "<br>Package: " + content.package : "") + "<br>Access: " + content.access + "</p>"
		                        if (content.example) {
		                        	tooltip += '<p><a href="javascript:void(0);" onclick="copy2Editor(\'' + url + '\', 0); return false;">Add: </a>' + content.example;	
		                        }
		                        if (content.example2 && content.example !== content.example2) {
		                        	tooltip += '<br><a href="javascript:void(0);" onclick="copy2Editor(\'' + url + '\', 1); return false;">Add: </a>' + content.example2;	
		                        }
		                        if (content.returns) {
		                        	tooltip += "<br>Returns: " + content.returns;
		                        }
		                        tooltip += "</p>";
		                        	
		                        var descHref = (content.desc && content.desc.length ? "Desc: " + content.desc : "") + (content.href && content.href.length ? "<br>" + serviceHelpRef(content.href) : ""); 
		                        if (descHref !== undefined && descHref.length) {
		                        	tooltip += "<p>" + descHref + "</p>";
		                        }
		                        tooltip += "<p>Double click item to insert into code editor.</p>";
	                        }
	                        api.set('content.text', tooltip);
	                    }, function(xhr, status, error) {
	                        // Upon failure... set the tooltip content to error
	                        api.set('content.text', status + ': ' + error);
	                    });
	        
	                    //return ''; // Set some initial text
	                }
	            },
				show: {
					delay: 1000
				},
	            hide: {
					delay: 0,
          			fixed: true
     			},
	            position: {
	                my: 'left top',
	                at: 'bottom left',
	                viewport: $(window),
	                effect: false
	            }
	        });
	        //ko.applyBindingAccessorsToNode(element, {visible: valueAccessor()});
	    },
	    update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
// 	        var visible = ko.utils.unwrapObservable(valueAccessor());
// 	        if(!visible) {
// 	            $(element).qtip('hide');
// 	        }
	    }
	};
 */	
	ko.bindingHandlers.qTipWf = {
	    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
	        $(element).qtip({
				style: {
                	classes: 'qtip-bootstrap'
            	},
				content: {
	                text: function(event, api) {
	                    $.ajax({
	                        url: "/samples?tooltip=" + viewModel.id()
	                    })
	                    .then(function(content) {
	                        // Set the tooltip content upon successful retrieval
	                        if (!content) {
	                        	content = "";
	                        }
	                        else {
		                        content = JSON.parse(content);
		                        tooltip = "<p>Name: " + content.name + "<br>Owner: " + content.user + "<br>Public: " + content.public + "</p>"
		                        +"<p>Desc: " + content.desc + "</p>"
		                        + "<p>Double click to insert into code editor</p>";
	                        }
	                        api.set('content.text', tooltip);
	                    }, function(xhr, status, error) {
	                        // Upon failure... set the tooltip content to error
	                        api.set('content.text', status + ': ' + error);
	                    });
	        
	                    //return ''; // Set some initial text
	                }
	            },
				show: {
					delay: 1000
				},
	            hide: {
					delay: 0,
          			fixed: true
     			},
	            position: {
	                my: 'left top',
	                at: 'bottom left',
	                viewport: $(window),
	                effect: false
	            }
	        });
	    },
	    update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
	    }
	};

	ko.bindingHandlers.qTipDs = {
	    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
	        $(element).qtip({
				style: {
                	classes: 'qtip-bootstrap'
            	},
				content: {
	                text: function(event, api) {
	                    $.ajax({
	                        url: "/runnables?tooltip=" + viewModel.id() //api.elements.target.attr('href') // Use href attribute as URL
	                    })
	                    .then(function(content) {
	                        // Set the tooltip content upon successful retrieval
	                        content = JSON.parse(content);
	                        content = "<p>Name: " + content.name + "</p><p>Created: " + content.created_on + "<br>Modified: " + content.modified_on + "<br>Duration: " + content.duration + 
	                        	"(s)</p><p>Status: " + content.status + (content.err && content.err.length > 0 ? "<br>Error: " + content.err : "") + "</p><p>Double click to show in report.<br>Check to pin job to report.</p>";

	                        api.set('content.text', content);
	                    }, function(xhr, status, error) {
	                        // Upon failure... set the tooltip content to error
	                        api.set('content.text', status + ': ' + error);
	                    });
	                    //return ''; // Set some initial text
	                }
	            },
				show: {
					delay: 1000
				},
	            hide: {
					delay: 0,
          			fixed: true
     			},
	            position: {
	                my: 'left top',
	                at: 'bottom left',
	                viewport: $(window),
	                effect: false
	            }
	        });
	    },
	    update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
	    }
	};
  
   function customMenu(node)
   {
       var items = {
           'item1' : {
        	   'label': 'To editor',
        	   'icon': 'glyphicon glyphicon-paste',
               'action' : function(data) {
            	   var inst = $.jstree.reference(data.reference);
            	   var node = inst.get_node(data.reference);
            	   	copyDataPathToEditor(node.original);
            	   }
		   },
		   'item2' : {
        	   'label': 'Provenance',
        	   'icon': 'glyphicon glyphicon-paste',
        	   'separator_after': true,
               'action' : function(data) {
            	   var inst = $.jstree.reference(data.reference);
            	   var node = inst.get_node(data.reference);
				   copyProvSnippetToEditor(node.original);
            	}
           },
           'item3' : {
               'label' : 'To args',
               'icon': 'glyphicon glyphicon-paste',
               'action' : function(data) {
            	   var inst = $.jstree.reference(data.reference);
            	   var node = inst.get_node(data.reference);
            	   	typeInTextarea(document.getElementById("args"), "'" + node.original.path + "'");
            	   }
           },
           'item4' : {
               'label' : 'Show Metadata',
               'icon': 'glyphicon glyphicon-th',
               'action' : function(data) {
            	   var inst = $.jstree.reference(data.reference);
            	   var node = inst.get_node(data.reference);
            	   showMetadata(node.original.path);
            	   showTab("liMetadataTab");
            	}
           }
	   }
	   
		if (handleModeViewModel.getMode() !== 'provMode' || node.type === 'level_1') {
			delete items.item2;
		} else if (node.type === 'level_2') {
			delete items.item1;
		}

		return items;
   }
   
   ko.bindingHandlers.jstree = {
	    buildTree: function (element, treeData) {
			//$(element).jstree('destroy');
			
			// before destroy jstree check jstree already exists or not
			if($(element).find("li").length > 0){
               $(element).empty();
			}

	        $(element).jstree({
	            'core': {
	                'animation': 0,
	                'check_callback': true,
	                'multiple': false,
	                'data': treeData
	            },
	            'contextmenu': {
	            	'items': customMenu
	            },
	            'types': {
	                'folder': {
	                	'valid_children': ['folder','file']
	                },
	                'file': {
	                	'icon': 'glyphicon glyphicon-file',
	                	'max_depth': 0
	                }
	            },
	            "search": {
	    			"case_insensitive": true,
	    			"show_only_matches" : true
	    		},
                'plugins': ['search', 'state', 'types', 'wholerow', 'contextmenu']
	        });
			$(element).bind('ready.jstree', function (e, data) {
			   $('.jstree-node').on("dragstart", function (e) {
				   e.stopPropagation();
				   var nodeId = e.target.id.replace("_anchor", "");
				   var node = $("#tree").jstree(true).get_node(nodeId);
				   var nodeData = "\'"+node.original.path + "\'";
				   var cursorPos = editor.selection.getCursor();
				   var editorText = editor.session.getLine(cursorPos.row);
				   if (!editorText) {
					   e.originalEvent.dataTransfer.setData('text/plain', "data = " + nodeData + "\r\n")
				   }
				   else {
					   e.originalEvent.dataTransfer.setData("text/plain", nodeData);
				   }
			   });
		   });
		   $(element).on("redraw.jstree", function(e, data){
			   $('.jstree-node').on("dragstart", function(e){
				   e.stopPropagation();
				   var nodeId = e.target.id.replace("_anchor", "");
				   var node = $("#tree").jstree(true).get_node(nodeId);
				   var nodeData = "\'"+node.original.path + "\'";
				   var cursorPos = editor.selection.getCursor();
				   var editorText = editor.session.getLine(cursorPos.row);
				   if (!editorText) {
					   e.originalEvent.dataTransfer.setData('text/plain', "data = " + nodeData + "\r\n")
				   }
				   else {
					   e.originalEvent.dataTransfer.setData("text/plain", nodeData);
				   }
			   });

			   metadataViewModel.selectNode();
			   setTimeout(() => {
				filterViewModel.selectNode();
			   }, 100);
		   });
		   $(element).on('select_node.jstree', function (e, data) {

			   showMetadata(data.node.original.path);
			   showBrowser(data.node);
			   //    var isMetatab = $("#metatab").hasClass('active');
			   //    var isBrowserTab = $("#browsertab").hasClass('active');
			   //    if (isMetatab) {
			   // 	   showMetadata(data.node.original.path);
			   //    }
			   //    else if(isBrowserTab){
			   // 	   showBrowser(data.node);
			   //    }

		   });
		   $(element).on("search.jstree", function () {
			   var node = $('#tree').jstree().get_selected(true)[0];

			   if (!node || node.state.hidden) {
				   browserViewModel.emptyBrowser();
			   }
			   else if (node && !node.state.hidden) {
				   showBrowser(node);
			   }
		   });

		   $(element).on("clear_search.jstree", function (nodes, str, res) {
			   var node = $('#tree').jstree().get_selected(true)[0];
			   var searchString = ko.utils.unwrapObservable(dataSourceViewModel.searchDataSource);

			   if(node && !searchString){
			   		showBrowser(node);
			   }
		   });
	    },
	    update: function (element, valueAccessor) {
	        var treeData = ko.unwrap(valueAccessor());
	        ko.bindingHandlers.jstree.buildTree(element, treeData.data());
	    }
	};
   
   
    // Create the View Model and initialise with initial data 
    var dataSourceViewModel = new DataSourceViewModel();
    ko.applyBindings(dataSourceViewModel, $("#dataSourcesPanel")[0]);
    
//     $('#rename-filefolder-dialog').on('shown.bs.modal', function () {
//     	var node = dataSourceViewModel.selectedNode();
//     	if (node === undefined)
//     		return;
//     	var filename = node.path.replace(/^.*[\\\/]/, '')
//         $('#rename-filefolder-text').val(filename);
//         $('#rename-filefolder-text').focus();
//     });
		

    // configure ace.js for code editor
    var langTools = ace.require("ace/ext/language_tools");
    var editor = ace.edit("editor");
    editor.renderer.setShowGutter(false);
    editor.getSession().setMode("ace/mode/python");
    editor.setOptions({
    	highlightSelectedWord: true, 
    	enableBasicAutocompletion: true,
    	autoScrollEditorIntoView: true,
    	fontSize: "11pt"
    });
    editor.renderer.setOptions({
    	showGutter: true, 
    	displayIndentGuides: true
    });
    //editor.setKeyboardHandler("ace/keyboard/vim");
    //editor.setTheme("ace/theme/idle_fingers");
    //editor.setTheme("ace/theme/twilight");
    editor.setTheme("ace/theme/iplastic");
    editor.setShowPrintMargin(false);
    editor.on("input", function() {
        isDirty = !editor.session.getUndoManager().isClean();
    });
    
    /*var staticWordCompleter = {
   	    getCompletions: function(editor, session, pos, prefix, callback) {
   	        var wordList = ["foo", "bar", "baz"];
   	        callback(null, wordList.map(function(word) {
   	            return {
   	                caption: word,
   	                value: word,
   	                meta: "static"
   	            };
   	        }));

   	    }
   	}*/

   	
   	if (localStorage[username.concat('_inputVals')] !== undefined)
   		editor.session.setValue(JSON.parse(localStorage[username.concat('_inputVals')]));

    var dynamicWordCompleter = {
     	getCompletions: function(editor, session, pos, prefix, callback) {
 	    $.getJSON('/functions?codecompletion=' + prefix,
 	      function(tagList) {
 	        callback(null, tagList.functions.map(function(qtag) {
 	          return { caption: qtag.name + '(' + qtag.package + ')', value: qtag.example, meta: qtag.group}
 	      }));
 	    })
 	   }
  	}
    
   	langTools.setCompleters([dynamicWordCompleter])
   	// or 
   	//editor.completers = [staticWordCompleter]


		ko.bindingHandlers.draggable = {
			init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
				$(element).draggable(
					{
						revert: 'invalid',
						helper: 'clone',
						stack: '.draggable-func, .draggable-workflow'
					});
			}
		};

   

       $('input[name="wfaccess"]').change(function(e) { // Select the radio input group

    	    // This returns the value of the checked radio button
    	    // which triggered the event.
    	    if ($(this).val() == 1) {
    	    	$("#wfusers").show();
    	    }
    	    else {
    	    	$("#wfusers").hide();
    	    }
    	});
       
       $("input[name='loadr']").change(function(e) { // Select the radio input group
	   	    if (this.checked) {
	   	    	
	   	    }
	   	    else {
	   	    	
	   	    }
   		});
	   
		   
        
        function isJson(item) {
            item = typeof item !== "string" ? JSON.stringify(item) : item;

            try {
                item = JSON.parse(item);
            } catch (e) {
                return false;
            }

            return (typeof item === "object" && item !== null);
        }
        
        
        function EditTaskViewModel() {
            var self = this;
            self.package = ko.observable();
            self.name = ko.observable();
            self.internal = ko.observable();
            self.example = ko.observable();
            self.example2 = ko.observable();
 
            self.setTask = function(task) {
                self.task = task;
                self.package(task.package());
                self.name(task.name());
                self.internal(task.internal());
                self.example(task.example());
                self.example2(task.example2());
                $('edit').modal('show');
            }
 
            self.editTask = function() {
                $('#edit').modal('hide');
                tasksViewModel.edit(self.task, {
                	package: self.package(),
                	name: self.name(),
                    internal: self.internal(),
                    example: self.example(),
                    example2: self.example2()
                });
            }
		}

		function ScriptViewModel() {
			var self = this;
			self.prevModeScript = ko.observable('')

			self.getPrevModeScript = function(){
				return self.prevModeScript()
			}
			self.setPrevScript = function(){
				var currentScript = editor.session.getValue()
				editor.session.setValue("");
				editor.session.insert(editor.selection.getCursor(), self.prevModeScript());
				editor.focus();
				self.prevModeScript(currentScript)
			}
		}
		var scriptViewModel = new ScriptViewModel();
		
		function HandleModeViewModel() {
            var self = this;
			self.currentMode = ko.observable('wfMode');
			self.shouldProvElemShow = ko.observable(false);
			self.shouldGraphBtnShow = ko.observable(false);
			
            self.setMode = function(id) {
				if(self.currentMode() !== id){
					scriptViewModel.setPrevScript();
				}
				if(id == 'wfMode'){
					self.currentMode('wfMode')
					self.shouldProvElemShow(false)
					self.shouldGraphBtnShow(true)
					$("#provMode").removeClass("active-mode");
					$("#wfMode").addClass("active-mode");
					$("#exTabBiowl li:first a").tab('show').on('shown.bs.tab', function (param) {
						$("#exTabBiowl ul li:first").addClass('active');	
					});

					$('#liBrowserTab').show();
					$('#liOutput').show();
					$('#liProvenanceTab').hide();
					
					$('#liVisualTab').hide();
					$('#liMetadataTab').hide();
					$('#liFilterHistoryTab').hide();
					$('#liDataset').hide();

					$('#provplugins').hide();
				}
				else if(id == 'provMode'){
					self.currentMode('provMode')
					self.shouldProvElemShow(true)
					self.shouldGraphBtnShow(false)
					$("#wfMode").removeClass("active-mode");
					$("#provMode").addClass("active-mode");
					$("#exTabBiowl li:first a").tab('show').on('shown.bs.tab', function (param) {
						$("#exTabBiowl ul li:first").addClass('active');	
					});

					$('#liProvenanceTab').show();
					$('#liBrowserTab').hide();
					$('#liOutput').hide();

					$('#liVisualTab').hide();
					$('#liMetadataTab').hide();
					$('#liFilterHistoryTab').hide();
					$('#liDataset').hide();

					$('#provplugins').show();
				}
			}
			
			self.getMode = function(){
				return self.currentMode()
			}
        }
		var handleModeViewModel = new HandleModeViewModel();
		// ko.applyBindings(handleModeViewModel, $("#main")[0]);
      
		// Browser ViewModel binding
		var browserViewModel = new BrowserViewModel();
		var browserItemModalViewModel = new BrowserItemModalViewModel();

		ko.applyBindings(browserViewModel, $("#browserView")[0]);
		ko.applyBindings(browserItemModalViewModel, $("#browserItemModal")[0]);


		function loadBrowserData(data) {
			browserViewModel.loadItems(data);
			if ($("#browsertab").length == 0) {
				createNewBrowserTab("browsertab", "Browser", "fade in scriptstyle");
			}
			// else{
			// 	ko.applyBindings(browserViewModel, $("#browserView")[0]);
			// }
		}

		function showBrowser(data) {
			loadBrowserData(data);
			if ($("#browserView").parent('div#browsertab').length == 0) {
				$('#browsertab').append($("#browserView"));
				$("#browserView").show();
			}
		}
        
        
	  

	   var datasetviewViewModel = new DatasetviewViewModel();
	   ko.applyBindings(datasetviewViewModel, $("#datasetView")[0]);

	   function showDatasetTab(schema) {
		loadDatasetviewData(schema);
			if ($("#datasetView").parent('div#datasettab').length == 0) {
				$('#datasettab').append($("#datasetView"));
				$("#datasetView").show();
			}
		}

	   function loadDatasetviewData(schema) {
		datasetviewViewModel.load(schema);
			if ($("#datasettab").length == 0) {
				createNewBrowserTab("datasettab", "Dataset", "fade in scriptstyle");
			}
		}

	  
	   
	    var datasetAddViewModel = new DatasetAddViewModel();
		var datasetsViewModel = new DatasetsViewModel();
		var addLibraryViewModel = new AddLibraryViewModel(username, ace);
		var addProvPluginViewModel = new AddProvPluginViewModel(ace);
        var sampleViewModel = new SampleViewModel();
		var editTaskViewModel = new EditTaskViewModel();
		var provgraphviewmodel = new provgraphViewModel();
		var monitorGraphViewModel = new monitorGraphViewModel();
		 
//         var loginViewModel = new LoginViewModel();

		var taskSharingViewModel = new TaskSharingViewModel();
		taskSharingViewModel.getUsers();
        var tasksViewModel = new TasksViewModel();
		tasksViewModel.load();
        
        var samplesViewModel = new SamplesViewModel(sampleViewModel);
        samplesViewModel.load();
        
        var runnablesViewModel = new RunnablesViewModel();        
        runnablesViewModel.load();

		var provpluginsViewModel = new ProvPluginsViewModel();        
        provpluginsViewModel.load();
        
        var metadataViewModel = new MetaDataViewModel();
        
		ko.applyBindings(datasetAddViewModel, $("#dataSets-addNew-dialog")[0]);
		ko.applyBindings(datasetsViewModel , $("#dataSetsPanel")[0]);
        ko.applyBindings(tasksViewModel, $('#main')[0]);
        ko.applyBindings(tasksViewModel, $('#functions')[0]);
		ko.applyBindings(provpluginsViewModel, $('#provplugins')[0]);
        ko.applyBindings(samplesViewModel, $('#samples')[0]);
        ko.applyBindings(addLibraryViewModel, $('#add')[0]);
		ko.applyBindings(addProvPluginViewModel, $('#addProv')[0]);
        ko.applyBindings(sampleViewModel, $('#addSample')[0]);
        ko.applyBindings(editTaskViewModel, $('#edit')[0]);
        ko.applyBindings(metadataViewModel, $('#metadataView')[0]);
		ko.applyBindings(metadataViewModel, $('#update-metadata-dialog')[0]);
		// ko.applyBindings(tasksViewModel, $("#executeSection")[0]);
		ko.applyBindings(taskSharingViewModel, $('#modalShareService')[0]);

		ko.applyBindings(samplesViewModel, $('#wfCompareSelection')[0]);

        ko.applyBindings(runnablesViewModel, $('#runnableWorkflowsPanel')[0]);
    
        dataSourceViewModel.loadMetadataProperties();
        ko.applyBindings(dataSourceViewModel, $("#file-upload-dialog")[0]);

        
       	ko.applyBindings(filterViewModel, $('#filter-dialog')[0]);
       	ko.applyBindings(filterViewModel, $('#searchHistoryPanel')[0]);
       	ko.applyBindings(filterViewModel, $('#filterhistoryView')[0]);
		ko.applyBindings(filterViewModel, $('#filter-area')[0]);

       	filterViewModel.loadHistory();
       	filterViewModel.loadSavedFilters();
       	showFilterHistory();           
	   
		datasetViewModel = new DatasetPluginViewModel(scidatapath);
		ko.applyBindings(datasetViewModel, $('#datasetPluginPanel')[0]);
		datasetViewModel.renderDataset()

    $(window).on('unload', function() {
        if (refreshId != 0)
            clearInterval(refreshId);
    });
        
	$(window).on("blur focus", function(e) {
	    var prevType = $(this).data("prevType");
	
	    if (prevType != e.type) {   //  reduce double fire issues
	        switch (e.type) {
	            case "blur":
	            	clearInterval(refreshId);
	            	refreshId = 0;
	                break;
	            case "focus":
	            	if (!refreshId) {
	            		refreshId = setInterval(function() {
	            			if (runnablesViewModel !== undefined)
								runnablesViewModel.load();
								
							ids = runnablesViewModel.selectedIds();
							if (ids.length !== 0) {
								runnablesViewModel.loadHistory(ids[0], false);
							} 
	            			else if (reportId > 0) {
								if ($.isEmptyObject(runnablesViewModel.items())) {
									reportId = 0;
								}
								else
								{
									var found = false;
									$.each(runnablesViewModel.items(), function(index, item){
										if (item.id() == reportId) {
											found = true;
											return false;
										}
									});
									if (found)
	            						runnablesViewModel.loadHistory(reportId, false);
									else
										reportId = 0;
								}
	            			}
	                    }, 10000); //  refresh the executables once in 10 seconds
	            	}
	                break;
	        }
	    }
	
	    $(this).data("prevType", e.type);
	})
	
	$(window).on('beforeunload', function(){
		var script = $.trim(editor.getSession().getValue());
    	localStorage.setItem(username.concat('_inputVals'), JSON.stringify(script) );
	});
	
	// $(window).on('keypress', function(event){
	// 	if(event.keyCode=='27'){
    //       $("#add").modal('hide');
	// 	  $("#addSample").modal('hide');
    //   }
	// });

	
	$("#exTabBiowl").on("click", "a", function (e) {
        e.preventDefault();

        $(this).tab('show');
        $currentBiowlTab = $(this);
    });
	
	function getMetaDataCollection(jtbody) {
		var type = jtbody.data('bind');
		
		//var type = $(this).data("type");
		//metadataviewmodel = ko.dataFor($(this).parents("table")[0]);
		var metadataCollection;
		if (type.includes("mimetypes")){
			metadataCollection = metadataViewModel.mimetypes;
		}
		
		return metadataCollection;
	}
	
	$(".add-new").click(function(){
		$(this).attr("disabled", "disabled");
		
		metadataCollection = getMetaDataCollection($(this).closest('div.table-wrapper').find('table tbody'));
		metadataCollection.push("new key", "new value");
    });
	
	// Add row on add button click
	$(document).on("click", ".add", function(){
		
		var empty = false;
		var input = $(this).parents("tr").find('input[type="text"]');
        input.each(function(){
			if(!$(this).val()){
				$(this).addClass("error");
				empty = true;
			} else{
                $(this).removeClass("error");
            }
		});
		$(this).parents("tr").find(".error").first().focus();
		if(!empty){
			input.each(function(){
				$(this).parent("td").html($(this).val());
			});
			
			metadata = ko.dataFor($(this).parents("tr")[0]);
			metadata.value(input[1].value);
			
			$(this).parents("tr").find(".add, .edit").toggle();
			$(".add-new").removeAttr("disabled");
		}
    });
	
	// Edit row on edit button click
	$(document).on("click", ".edit", function(){	
        $(this).parents("tr").find("td:not(:last-child)").each(function(){
			$(this).html('<input type="text" class="form-control" value="' + $(this).text() + '">');
		});		
		$(this).parents("tr").find(".add, .edit").toggle();
		$(".add-new").attr("disabled", "disabled");
    });
	
	// Delete row on delete button click
	$(document).on("click", ".delete", function(){
		
		metadataCollection = getMetaDataCollection($(this).parents('table tbody'));
		
		metadata = ko.dataFor($(this).parents("tr")[0]);
		metadataCollection.remove(metadata);
		
        $(this).parents("tr").remove();
		$(".add-new").removeAttr("disabled");
    });
	
	
	
	$("#exTabBiowl").on('shown.bs.tab', function (e) {
		var x = $(e.target).attr('href');
 		// if (x === "#visualtab") {
		// 	//gojsControlFlow;
		// } else if 
		if (x === "#filterhistorytab") {
			showFilterHistory();
		} 
	})

	//this method will register event on close icon on the tab..
    function registerCloseEvent() {

        $(".closeTab").click(function (e) {

			e.stopPropagation();

			$(this).parent().parent('li').hide();
			var currentTab = $(this).parent().parent('li').attr('id');
			var activeTab = $("#exTabBiowl ul li.active").attr('id');

			 if (activeTab == currentTab) {
				$("#exTabBiowl li:first a").tab('show').on('shown.bs.tab', function (param) {
					$("#exTabBiowl ul li:first").addClass('active');
					// $("#scripttab").addClass('active').siblings().removeClass('active');		
				});
			}
			
			

        });
    }
	
    function showTab(tabId) {
		$("#"+ tabId).show();
		$("#" + tabId).children('a').tab('show');
	}
	
    //This function will create a new tab here and it will load the url content in tab content div.
    function createNewTabAndLoadUrl(parms, url, loadDivSelector) {

        $("" + loadDivSelector).load(url, function (response, status, xhr) {
            if (status == "error") {
                var msg = "Sorry but there was an error getting details ! ";
                $("" + loadDivSelector).html(msg + xhr.status + " " + xhr.statusText);
                $("" + loadDivSelector).html("Load Ajax Content Here...");
            }
        });
    }

    
  function createNewTab(tabId, tabHeader, style) {
	  
	  $('#exTabBiowl .nav-tabs').append('<li><a href="#' + tabId + '"><button class="close closeTab" type="button" >×</button>' + tabHeader + '</a></li>');
	  $('#exTabBiowl .tab-content').append('<div class="tab-pane '+ style + '" id="' + tabId + '" style="overflow-y: scroll"></div>');
	  	
	  //createNewTabAndLoadUrl("", "./SamplePage.html", "#" + tabId);
	  
	  //$(this).tab('show');
	  showTab(tabId);
	  registerCloseEvent();
// 	  ko.cleanNode($("#metadataView")[0]);
 	  ko.applyBindings(metadataViewModel, $('#metadataView')[0]);
  }

  function createNewBrowserTab(tabId, tabHeader, style){
	$('#exTabBiowl .nav-tabs').append('<li><a href="#' + tabId + '"><button class="close closeTab" type="button" >×</button>' + tabHeader + '</a></li>');
	  $('#exTabBiowl .tab-content').append('<div class="tab-pane '+ style + '" id="' + tabId + '" style="overflow-y: scroll"></div>');
	 
	  showTab(tabId);
	  registerCloseEvent();
 	  //ko.applyBindings(browserViewModel, $('#browserView')[0]);
  }
  
  registerCloseEvent();

  var gridStackViewModel = new GridStackViewModel();
//   gridStackViewModel.defaultLayout = gridStackViewModel.serialize();
//   gridStackViewModel.load();
// ko.applyBindings(gridStackViewModel, $("#layoutSelection")[0]);
// ko.applyBindings(gridStackViewModel, $("#saveLayout")[0]);

// gridStackViewModel.savedLayouts.push({layoutName: 'Default', properties : gridStackViewModel.defaultLayout});
        
</script>
{{ pagedown.include_pagedown() }}
{% endblock %}
